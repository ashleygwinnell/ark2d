<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ARK2D: src/ARK2D/vendor/android/freetype/jni/src/psaux/t1decode.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ARK2D
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('t1decode_8c.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">src/ARK2D/vendor/android/freetype/jni/src/psaux/t1decode.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="t1decode_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************/</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                         */</span>
<a name="l00003"></a>00003 <span class="comment">/*  t1decode.c                                                             */</span>
<a name="l00004"></a>00004 <span class="comment">/*                                                                         */</span>
<a name="l00005"></a>00005 <span class="comment">/*    PostScript Type 1 decoding routines (body).                          */</span>
<a name="l00006"></a>00006 <span class="comment">/*                                                                         */</span>
<a name="l00007"></a>00007 <span class="comment">/*  Copyright 2000-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009    */</span>
<a name="l00008"></a>00008 <span class="comment">/*            2010 by                                                      */</span>
<a name="l00009"></a>00009 <span class="comment">/*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<a name="l00010"></a>00010 <span class="comment">/*                                                                         */</span>
<a name="l00011"></a>00011 <span class="comment">/*  This file is part of the FreeType project, and may only be used,       */</span>
<a name="l00012"></a>00012 <span class="comment">/*  modified, and distributed under the terms of the FreeType project      */</span>
<a name="l00013"></a>00013 <span class="comment">/*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<a name="l00014"></a>00014 <span class="comment">/*  this file you indicate that you have read the license and              */</span>
<a name="l00015"></a>00015 <span class="comment">/*  understand and accept it fully.                                        */</span>
<a name="l00016"></a>00016 <span class="comment">/*                                                                         */</span>
<a name="l00017"></a>00017 <span class="comment">/***************************************************************************/</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;<a class="code" href="ft2build_8h.html">ft2build.h</a>&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include FT_INTERNAL_CALC_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#include FT_INTERNAL_DEBUG_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#include FT_INTERNAL_POSTSCRIPT_HINTS_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#include FT_OUTLINE_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="t1decode_8h.html">t1decode.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="psobjs_8h.html">psobjs.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="psauxerr_8h.html">psauxerr.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00032"></a>00032   <span class="comment">/*************************************************************************/</span>
<a name="l00033"></a>00033   <span class="comment">/*                                                                       */</span>
<a name="l00034"></a>00034   <span class="comment">/* The macro FT_COMPONENT is used in trace mode.  It is an implicit      */</span>
<a name="l00035"></a>00035   <span class="comment">/* parameter of the FT_TRACE() and FT_ERROR() macros, used to print/log  */</span>
<a name="l00036"></a>00036   <span class="comment">/* messages during execution.                                            */</span>
<a name="l00037"></a>00037   <span class="comment">/*                                                                       */</span>
<a name="l00038"></a>00038 <span class="preprocessor">#undef  FT_COMPONENT</span>
<a name="l00039"></a><a class="code" href="t1decode_8c.html#a9c208ea57bc9a5fcbfc81a6106d28f3a">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define FT_COMPONENT  trace_t1decode</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027">00042</a>   <span class="keyword">typedef</span> <span class="keyword">enum</span>  <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027">T1_Operator_</a>
<a name="l00043"></a>00043   {
<a name="l00044"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">00044</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">op_none</a> = 0,
<a name="l00045"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5865685cd8c3379310a21f7f89ee172">00045</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5865685cd8c3379310a21f7f89ee172">op_endchar</a>,
<a name="l00046"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a65d1289a9a18b41f7fe5f9884b5c37fa">00046</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a65d1289a9a18b41f7fe5f9884b5c37fa">op_hsbw</a>,
<a name="l00047"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a64c4b96befee91f20e7fa6d74586167e">00047</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a64c4b96befee91f20e7fa6d74586167e">op_seac</a>,
<a name="l00048"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa10276ebf35f61596ef9fe3c7277dfc9">00048</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa10276ebf35f61596ef9fe3c7277dfc9">op_sbw</a>,
<a name="l00049"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a6f703a74ca71784db63158554283b51b">00049</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a6f703a74ca71784db63158554283b51b">op_closepath</a>,
<a name="l00050"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a345381d12e43f5b182ee5e2a30fb534b">00050</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a345381d12e43f5b182ee5e2a30fb534b">op_hlineto</a>,
<a name="l00051"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a17b3215232ad4560513c87a128c456db">00051</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a17b3215232ad4560513c87a128c456db">op_hmoveto</a>,
<a name="l00052"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027af3031b1cf9b0b560e55cf3c9c5e62819">00052</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027af3031b1cf9b0b560e55cf3c9c5e62819">op_hvcurveto</a>,
<a name="l00053"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a391b95dc045d3973c0cd0c3ef32d9f4a">00053</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a391b95dc045d3973c0cd0c3ef32d9f4a">op_rlineto</a>,
<a name="l00054"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8829ed2c50556442df2afa87da1900ed">00054</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8829ed2c50556442df2afa87da1900ed">op_rmoveto</a>,
<a name="l00055"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5358bd2ed1ccc8889d9cfae696fb2667">00055</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5358bd2ed1ccc8889d9cfae696fb2667">op_rrcurveto</a>,
<a name="l00056"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a55f712c565a31264a85d1323c9b3d59c">00056</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a55f712c565a31264a85d1323c9b3d59c">op_vhcurveto</a>,
<a name="l00057"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa1e4559f865967fef5d5bd04c82eebd8">00057</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa1e4559f865967fef5d5bd04c82eebd8">op_vlineto</a>,
<a name="l00058"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2f2c6673d7e040d4a28e415cfe085771">00058</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2f2c6673d7e040d4a28e415cfe085771">op_vmoveto</a>,
<a name="l00059"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2c900596353103204b06b14023330823">00059</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2c900596353103204b06b14023330823">op_dotsection</a>,
<a name="l00060"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a4bf8498f39a6dc52b9d5fb5964f22d8e">00060</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a4bf8498f39a6dc52b9d5fb5964f22d8e">op_hstem</a>,
<a name="l00061"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad76b5420253f810fc77191067c709c15">00061</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad76b5420253f810fc77191067c709c15">op_hstem3</a>,
<a name="l00062"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a20b81043ca6f12b0f56c4ce916906222">00062</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a20b81043ca6f12b0f56c4ce916906222">op_vstem</a>,
<a name="l00063"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad842c0bfcd60407d81e6db9d8230bff3">00063</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad842c0bfcd60407d81e6db9d8230bff3">op_vstem3</a>,
<a name="l00064"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">00064</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">op_div</a>,
<a name="l00065"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027acb534d2fa24aed7c899b82d20c311d0d">00065</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027acb534d2fa24aed7c899b82d20c311d0d">op_callothersubr</a>,
<a name="l00066"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">00066</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">op_callsubr</a>,
<a name="l00067"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">00067</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">op_pop</a>,
<a name="l00068"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">00068</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">op_return</a>,
<a name="l00069"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8722661efc05bb8edc83cfd04ae20c7a">00069</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8722661efc05bb8edc83cfd04ae20c7a">op_setcurrentpoint</a>,
<a name="l00070"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5c5c0a0ee577d2475e300221a46f1c8f">00070</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5c5c0a0ee577d2475e300221a46f1c8f">op_unknown15</a>,
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027abed77666dd324d83c8c9f0f3c88675be">00072</a>     <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027abed77666dd324d83c8c9f0f3c88675be">op_max</a>    <span class="comment">/* never remove this one */</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   } <a class="code" href="t1decode_8c.html#a5341f75fb9ceaf54deafa63d01fa98b6">T1_Operator</a>;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="keyword">static</span>
<a name="l00078"></a>00078   <span class="keyword">const</span> <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  t1_args_count[<a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027abed77666dd324d83c8c9f0f3c88675be">op_max</a>] =
<a name="l00079"></a>00079   {
<a name="l00080"></a>00080     0, <span class="comment">/* none */</span>
<a name="l00081"></a>00081     0, <span class="comment">/* endchar */</span>
<a name="l00082"></a>00082     2, <span class="comment">/* hsbw */</span>
<a name="l00083"></a>00083     5, <span class="comment">/* seac */</span>
<a name="l00084"></a>00084     4, <span class="comment">/* sbw */</span>
<a name="l00085"></a>00085     0, <span class="comment">/* closepath */</span>
<a name="l00086"></a>00086     1, <span class="comment">/* hlineto */</span>
<a name="l00087"></a>00087     1, <span class="comment">/* hmoveto */</span>
<a name="l00088"></a>00088     4, <span class="comment">/* hvcurveto */</span>
<a name="l00089"></a>00089     2, <span class="comment">/* rlineto */</span>
<a name="l00090"></a>00090     2, <span class="comment">/* rmoveto */</span>
<a name="l00091"></a>00091     6, <span class="comment">/* rrcurveto */</span>
<a name="l00092"></a>00092     4, <span class="comment">/* vhcurveto */</span>
<a name="l00093"></a>00093     1, <span class="comment">/* vlineto */</span>
<a name="l00094"></a>00094     1, <span class="comment">/* vmoveto */</span>
<a name="l00095"></a>00095     0, <span class="comment">/* dotsection */</span>
<a name="l00096"></a>00096     2, <span class="comment">/* hstem */</span>
<a name="l00097"></a>00097     6, <span class="comment">/* hstem3 */</span>
<a name="l00098"></a>00098     2, <span class="comment">/* vstem */</span>
<a name="l00099"></a>00099     6, <span class="comment">/* vstem3 */</span>
<a name="l00100"></a>00100     2, <span class="comment">/* div */</span>
<a name="l00101"></a>00101    -1, <span class="comment">/* callothersubr */</span>
<a name="l00102"></a>00102     1, <span class="comment">/* callsubr */</span>
<a name="l00103"></a>00103     0, <span class="comment">/* pop */</span>
<a name="l00104"></a>00104     0, <span class="comment">/* return */</span>
<a name="l00105"></a>00105     2, <span class="comment">/* setcurrentpoint */</span>
<a name="l00106"></a>00106     2  <span class="comment">/* opcode 15 (undocumented and obsolete) */</span>
<a name="l00107"></a>00107   };
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <span class="comment">/*************************************************************************/</span>
<a name="l00111"></a>00111   <span class="comment">/*                                                                       */</span>
<a name="l00112"></a>00112   <span class="comment">/* &lt;Function&gt;                                                            */</span>
<a name="l00113"></a>00113   <span class="comment">/*    t1_lookup_glyph_by_stdcharcode                                     */</span>
<a name="l00114"></a>00114   <span class="comment">/*                                                                       */</span>
<a name="l00115"></a>00115   <span class="comment">/* &lt;Description&gt;                                                         */</span>
<a name="l00116"></a>00116   <span class="comment">/*    Looks up a given glyph by its StandardEncoding charcode.  Used to  */</span>
<a name="l00117"></a>00117   <span class="comment">/*    implement the SEAC Type 1 operator.                                */</span>
<a name="l00118"></a>00118   <span class="comment">/*                                                                       */</span>
<a name="l00119"></a>00119   <span class="comment">/* &lt;Input&gt;                                                               */</span>
<a name="l00120"></a>00120   <span class="comment">/*    face     :: The current face object.                               */</span>
<a name="l00121"></a>00121   <span class="comment">/*                                                                       */</span>
<a name="l00122"></a>00122   <span class="comment">/*    charcode :: The character code to look for.                        */</span>
<a name="l00123"></a>00123   <span class="comment">/*                                                                       */</span>
<a name="l00124"></a>00124   <span class="comment">/* &lt;Return&gt;                                                              */</span>
<a name="l00125"></a>00125   <span class="comment">/*    A glyph index in the font face.  Returns -1 if the corresponding   */</span>
<a name="l00126"></a>00126   <span class="comment">/*    glyph wasn&#39;t found.                                                */</span>
<a name="l00127"></a>00127   <span class="comment">/*                                                                       */</span>
<a name="l00128"></a>00128   <span class="keyword">static</span> <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>
<a name="l00129"></a>00129   t1_lookup_glyph_by_stdcharcode( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>  decoder,
<a name="l00130"></a>00130                                   <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>      charcode )
<a name="l00131"></a>00131   {
<a name="l00132"></a>00132     <a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>             <a class="code" href="jsonmain_8cpp.html#a4eacae1d9e7c39f8236bb36d4ececa77">n</a>;
<a name="l00133"></a>00133     <span class="keyword">const</span> <a class="code" href="fttypes_8h.html#a9846214585359eb2ba6bbb0e6de30639">FT_String</a>*    glyph_name;
<a name="l00134"></a>00134     FT_Service_PsCMaps  psnames = decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#ac1c3efd334618c670c6e2b975829e926">psnames</a>;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="comment">/* check range of standard char code */</span>
<a name="l00138"></a>00138     <span class="keywordflow">if</span> ( charcode &lt; 0 || charcode &gt; 255 )
<a name="l00139"></a>00139       <span class="keywordflow">return</span> -1;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     glyph_name = psnames-&gt;adobe_std_strings(
<a name="l00142"></a>00142                    psnames-&gt;adobe_std_encoding[charcode]);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="keywordflow">for</span> ( n = 0; n &lt; decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a1ae08137c5931f34db9c3bb864b17712">num_glyphs</a>; n++ )
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146       <a class="code" href="fttypes_8h.html#a9846214585359eb2ba6bbb0e6de30639">FT_String</a>*  name = (<a class="code" href="fttypes_8h.html#a9846214585359eb2ba6bbb0e6de30639">FT_String</a>*)decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#acb8be0bdd36652cd4383754698b5b44a">glyph_names</a>[n];
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 
<a name="l00149"></a>00149       if ( name                               &amp;&amp;
<a name="l00150"></a>00150            name[0] == glyph_name[0]           &amp;&amp;
<a name="l00151"></a>00151            <a class="code" href="ftstdlib_8h.html#a6b4c8a4f84eee3fe618812761ae78adb">ft_strcmp</a>( name, glyph_name ) == 0 )
<a name="l00152"></a>00152         <span class="keywordflow">return</span> n;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="keywordflow">return</span> -1;
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159   <span class="comment">/*************************************************************************/</span>
<a name="l00160"></a>00160   <span class="comment">/*                                                                       */</span>
<a name="l00161"></a>00161   <span class="comment">/* &lt;Function&gt;                                                            */</span>
<a name="l00162"></a>00162   <span class="comment">/*    t1operator_seac                                                    */</span>
<a name="l00163"></a>00163   <span class="comment">/*                                                                       */</span>
<a name="l00164"></a>00164   <span class="comment">/* &lt;Description&gt;                                                         */</span>
<a name="l00165"></a>00165   <span class="comment">/*    Implements the `seac&#39; Type 1 operator for a Type 1 decoder.        */</span>
<a name="l00166"></a>00166   <span class="comment">/*                                                                       */</span>
<a name="l00167"></a>00167   <span class="comment">/* &lt;Input&gt;                                                               */</span>
<a name="l00168"></a>00168   <span class="comment">/*    decoder :: The current CID decoder.                                */</span>
<a name="l00169"></a>00169   <span class="comment">/*                                                                       */</span>
<a name="l00170"></a>00170   <span class="comment">/*    asb     :: The accent&#39;s side bearing.                              */</span>
<a name="l00171"></a>00171   <span class="comment">/*                                                                       */</span>
<a name="l00172"></a>00172   <span class="comment">/*    adx     :: The horizontal offset of the accent.                    */</span>
<a name="l00173"></a>00173   <span class="comment">/*                                                                       */</span>
<a name="l00174"></a>00174   <span class="comment">/*    ady     :: The vertical offset of the accent.                      */</span>
<a name="l00175"></a>00175   <span class="comment">/*                                                                       */</span>
<a name="l00176"></a>00176   <span class="comment">/*    bchar   :: The base character&#39;s StandardEncoding charcode.         */</span>
<a name="l00177"></a>00177   <span class="comment">/*                                                                       */</span>
<a name="l00178"></a>00178   <span class="comment">/*    achar   :: The accent character&#39;s StandardEncoding charcode.       */</span>
<a name="l00179"></a>00179   <span class="comment">/*                                                                       */</span>
<a name="l00180"></a>00180   <span class="comment">/* &lt;Return&gt;                                                              */</span>
<a name="l00181"></a>00181   <span class="comment">/*    FreeType error code.  0 means success.                             */</span>
<a name="l00182"></a>00182   <span class="comment">/*                                                                       */</span>
<a name="l00183"></a>00183   <span class="keyword">static</span> <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a>
<a name="l00184"></a>00184   t1operator_seac( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>  decoder,
<a name="l00185"></a>00185                    <a class="code" href="ftimage_8h.html#af5f230f4b253d4c7715fd2e595614c90">FT_Pos</a>      asb,
<a name="l00186"></a>00186                    <a class="code" href="ftimage_8h.html#af5f230f4b253d4c7715fd2e595614c90">FT_Pos</a>      adx,
<a name="l00187"></a>00187                    <a class="code" href="ftimage_8h.html#af5f230f4b253d4c7715fd2e595614c90">FT_Pos</a>      ady,
<a name="l00188"></a>00188                    <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>      bchar,
<a name="l00189"></a>00189                    <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>      achar )
<a name="l00190"></a>00190   {
<a name="l00191"></a>00191     <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a>     error;
<a name="l00192"></a>00192     <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>       bchar_index, achar_index;
<a name="l00193"></a>00193 <span class="preprocessor">#if 0</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span>    <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>       n_base_points;
<a name="l00195"></a>00195     <a class="code" href="struct_f_t___outline__.html">FT_Outline</a>*  base = decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a6096f6eba85f91c3ac6dc270d8af464c">base</a>;
<a name="l00196"></a>00196 <span class="preprocessor">#endif</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>    <a class="code" href="struct_f_t___vector__.html">FT_Vector</a>    left_bearing, advance;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="preprocessor">#ifdef FT_CONFIG_OPTION_INCREMENTAL</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span>    <a class="code" href="struct_t1___face_rec__.html">T1_Face</a>      face  = (<a class="code" href="t1types_8h.html#aaa7ce214cfe6275f724f1b693c288024">T1_Face</a>)decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a63764b21488527a39316aebeee9f98a2">face</a>;
<a name="l00201"></a>00201 #endif     
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     if ( decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a45bf18b54ff973177ea3061ef0b705c6">seac</a> )
<a name="l00205"></a>00205     {
<a name="l00206"></a>00206       <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1operator_seac: invalid nested seac\n&quot;</span> ));
<a name="l00207"></a>00207       <span class="keywordflow">return</span> PSaux_Err_Syntax_Error;
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="comment">/* seac weirdness */</span>
<a name="l00211"></a>00211     adx += decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a>;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="comment">/* `glyph_names&#39; is set to 0 for CID fonts which do not */</span>
<a name="l00214"></a>00214     <span class="comment">/* include an encoding.  How can we deal with these?    */</span>
<a name="l00215"></a>00215 <span class="preprocessor">#ifdef FT_CONFIG_OPTION_INCREMENTAL</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#acb8be0bdd36652cd4383754698b5b44a">glyph_names</a> == 0                   &amp;&amp;
<a name="l00217"></a>00217          !face-&gt;<a class="code" href="struct_t1___face_rec__.html#a43be05c1ded91ee98e851f285b97f2e8">root</a>.<a class="code" href="struct_f_t___face_rec__.html#aed9a1267cddcbe790f0591471c886537">internal</a>-&gt;incremental_interface )
<a name="l00218"></a>00218 <span class="preprocessor">#else</span>
<a name="l00219"></a>00219 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#acb8be0bdd36652cd4383754698b5b44a">glyph_names</a> == 0 )
<a name="l00220"></a>00220 <span class="preprocessor">#endif </span><span class="comment">/* FT_CONFIG_OPTION_INCREMENTAL */</span>
<a name="l00221"></a>00221     {
<a name="l00222"></a>00222       <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1operator_seac:&quot;</span>
<a name="l00223"></a>00223                  <span class="stringliteral">&quot; glyph names table not available in this font\n&quot;</span> ));
<a name="l00224"></a>00224       <span class="keywordflow">return</span> PSaux_Err_Syntax_Error;
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="preprocessor">#ifdef FT_CONFIG_OPTION_INCREMENTAL</span>
<a name="l00228"></a>00228 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( face-&gt;<a class="code" href="struct_t1___face_rec__.html#a43be05c1ded91ee98e851f285b97f2e8">root</a>.<a class="code" href="struct_f_t___face_rec__.html#aed9a1267cddcbe790f0591471c886537">internal</a>-&gt;incremental_interface )
<a name="l00229"></a>00229     {
<a name="l00230"></a>00230       <span class="comment">/* the caller must handle the font encoding also */</span>
<a name="l00231"></a>00231       bchar_index = bchar;
<a name="l00232"></a>00232       achar_index = achar;
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234     <span class="keywordflow">else</span>
<a name="l00235"></a>00235 <span class="preprocessor">#endif</span>
<a name="l00236"></a>00236 <span class="preprocessor"></span>    {
<a name="l00237"></a>00237       bchar_index = t1_lookup_glyph_by_stdcharcode( decoder, bchar );
<a name="l00238"></a>00238       achar_index = t1_lookup_glyph_by_stdcharcode( decoder, achar );
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="keywordflow">if</span> ( bchar_index &lt; 0 || achar_index &lt; 0 )
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243       <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1operator_seac:&quot;</span>
<a name="l00244"></a>00244                  <span class="stringliteral">&quot; invalid seac character code arguments\n&quot;</span> ));
<a name="l00245"></a>00245       <span class="keywordflow">return</span> PSaux_Err_Syntax_Error;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="comment">/* if we are trying to load a composite glyph, do not load the */</span>
<a name="l00249"></a>00249     <span class="comment">/* accent character and return the array of subglyphs.         */</span>
<a name="l00250"></a>00250     <span class="keywordflow">if</span> ( decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a0369f22bec404666e1c7dc6bb648ac28">no_recurse</a> )
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252       <a class="code" href="struct_f_t___glyph_slot_rec__.html">FT_GlyphSlot</a>    glyph  = (<a class="code" href="freetype_8h.html#a768daa0d9c3fa499e6c37034ee9f2ca3">FT_GlyphSlot</a>)decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a2382a6bc2256513f70bf959180f56e4c">glyph</a>;
<a name="l00253"></a>00253       <a class="code" href="ftgloadr_8h.html#a2671bcb107327e81037ea42332454741">FT_GlyphLoader</a>  loader = glyph-&gt;<a class="code" href="struct_f_t___glyph_slot_rec__.html#a91731fd527eeab1d1acf3e1aea4bea84">internal</a>-&gt;<a class="code" href="struct_f_t___slot___internal_rec__.html#ac57f8c939f667938ab9f986088c15d8f">loader</a>;
<a name="l00254"></a>00254       <a class="code" href="struct_f_t___sub_glyph_rec__.html">FT_SubGlyph</a>     subg;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="comment">/* reallocate subglyph array if necessary */</span>
<a name="l00258"></a>00258       error = <a class="code" href="ftgloadr_8h.html#af54f34fd85b3c880b33635dc4d8e8963">FT_GlyphLoader_CheckSubGlyphs</a>( loader, 2 );
<a name="l00259"></a>00259       <span class="keywordflow">if</span> ( error )
<a name="l00260"></a>00260         <span class="keywordflow">goto</span> Exit;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262       subg = loader-&gt;current.subglyphs;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264       <span class="comment">/* subglyph 0 = base character */</span>
<a name="l00265"></a>00265       subg-&gt;index = bchar_index;
<a name="l00266"></a>00266       subg-&gt;flags = <a class="code" href="freetype_8h.html#ab609fa06b6f57fff7bde18f6ad9a227e">FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES</a> |
<a name="l00267"></a>00267                     <a class="code" href="freetype_8h.html#a6b205cfbdb60c347f9ed7ac54b530cb6">FT_SUBGLYPH_FLAG_USE_MY_METRICS</a>;
<a name="l00268"></a>00268       subg-&gt;arg1  = 0;
<a name="l00269"></a>00269       subg-&gt;arg2  = 0;
<a name="l00270"></a>00270       subg++;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272       <span class="comment">/* subglyph 1 = accent character */</span>
<a name="l00273"></a>00273       subg-&gt;index = achar_index;
<a name="l00274"></a>00274       subg-&gt;flags = <a class="code" href="freetype_8h.html#ab609fa06b6f57fff7bde18f6ad9a227e">FT_SUBGLYPH_FLAG_ARGS_ARE_XY_VALUES</a>;
<a name="l00275"></a>00275       subg-&gt;arg1  = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)<a class="code" href="ftcalc_8h.html#a1a5fdb7b6355daf11d7e9e3ff673cba8">FIXED_TO_INT</a>( adx - asb );
<a name="l00276"></a>00276       subg-&gt;arg2  = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)<a class="code" href="ftcalc_8h.html#a1a5fdb7b6355daf11d7e9e3ff673cba8">FIXED_TO_INT</a>( ady );
<a name="l00277"></a>00277 
<a name="l00278"></a>00278       <span class="comment">/* set up remaining glyph fields */</span>
<a name="l00279"></a>00279       glyph-&gt;<a class="code" href="struct_f_t___glyph_slot_rec__.html#a5753b48d7165b08f106de3ad7c12bdd7">num_subglyphs</a> = 2;
<a name="l00280"></a>00280       glyph-&gt;<a class="code" href="struct_f_t___glyph_slot_rec__.html#a295f5a3108399c4c0703e6ee2f88cc67">subglyphs</a>     = loader-&gt;base.subglyphs;
<a name="l00281"></a>00281       glyph-&gt;<a class="code" href="struct_f_t___glyph_slot_rec__.html#afcd35188ff4c3d5cbb518602d05b2807">format</a>        = FT_GLYPH_FORMAT_COMPOSITE;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283       loader-&gt;current.num_subglyphs = 2;
<a name="l00284"></a>00284       <span class="keywordflow">goto</span> Exit;
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="comment">/* First load `bchar&#39; in builder */</span>
<a name="l00288"></a>00288     <span class="comment">/* now load the unscaled outline */</span>
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     <a class="code" href="ftgloadr_8h.html#a8b24efd8846b09cfecb3534926d95931">FT_GlyphLoader_Prepare</a>( decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#ae2202eaee7c0937435419d559374bd3c">loader</a> );  <span class="comment">/* prepare loader */</span>
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="comment">/* the seac operator must not be nested */</span>
<a name="l00293"></a>00293     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a45bf18b54ff973177ea3061ef0b705c6">seac</a> = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00294"></a>00294     error = <a class="code" href="t1decode_8c.html#a7bf6eef23a330d09b5db91623580be79">t1_decoder_parse_glyph</a>( decoder, bchar_index );
<a name="l00295"></a>00295     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a45bf18b54ff973177ea3061ef0b705c6">seac</a> = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00296"></a>00296     <span class="keywordflow">if</span> ( error )
<a name="l00297"></a>00297       <span class="keywordflow">goto</span> Exit;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299     <span class="comment">/* save the left bearing and width of the base character */</span>
<a name="l00300"></a>00300     <span class="comment">/* as they will be erased by the next load.              */</span>
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     left_bearing = decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>;
<a name="l00303"></a>00303     advance      = decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a> = 0;
<a name="l00306"></a>00306     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#ac3246ed214e880047ec74eeb15f8b973">y</a> = 0;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#ad3e29097d00fa1941ac17273c1310a92">pos_x</a> = adx - asb;
<a name="l00309"></a>00309     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#ad389bf0d5182b677ed3dba05a9612530">pos_y</a> = ady;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311     <span class="comment">/* Now load `achar&#39; on top of */</span>
<a name="l00312"></a>00312     <span class="comment">/* the base outline           */</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     <span class="comment">/* the seac operator must not be nested */</span>
<a name="l00315"></a>00315     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a45bf18b54ff973177ea3061ef0b705c6">seac</a> = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00316"></a>00316     error = <a class="code" href="t1decode_8c.html#a7bf6eef23a330d09b5db91623580be79">t1_decoder_parse_glyph</a>( decoder, achar_index );
<a name="l00317"></a>00317     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a45bf18b54ff973177ea3061ef0b705c6">seac</a> = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00318"></a>00318     <span class="keywordflow">if</span> ( error )
<a name="l00319"></a>00319       <span class="keywordflow">goto</span> Exit;
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     <span class="comment">/* restore the left side bearing and   */</span>
<a name="l00322"></a>00322     <span class="comment">/* advance width of the base character */</span>
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a> = left_bearing;
<a name="l00325"></a>00325     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>      = advance;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#ad3e29097d00fa1941ac17273c1310a92">pos_x</a> = 0;
<a name="l00328"></a>00328     decoder-&gt;<a class="code" href="struct_t1___decoder_rec__.html#a75fd9f539974efe45107ce602dc9ea1b">builder</a>.<a class="code" href="struct_t1___builder_rec__.html#ad389bf0d5182b677ed3dba05a9612530">pos_y</a> = 0;
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   Exit:
<a name="l00331"></a>00331     <span class="keywordflow">return</span> error;
<a name="l00332"></a>00332   }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="comment">/*************************************************************************/</span>
<a name="l00336"></a>00336   <span class="comment">/*                                                                       */</span>
<a name="l00337"></a>00337   <span class="comment">/* &lt;Function&gt;                                                            */</span>
<a name="l00338"></a>00338   <span class="comment">/*    t1_decoder_parse_charstrings                                       */</span>
<a name="l00339"></a>00339   <span class="comment">/*                                                                       */</span>
<a name="l00340"></a>00340   <span class="comment">/* &lt;Description&gt;                                                         */</span>
<a name="l00341"></a>00341   <span class="comment">/*    Parses a given Type 1 charstrings program.                         */</span>
<a name="l00342"></a>00342   <span class="comment">/*                                                                       */</span>
<a name="l00343"></a>00343   <span class="comment">/* &lt;Input&gt;                                                               */</span>
<a name="l00344"></a>00344   <span class="comment">/*    decoder         :: The current Type 1 decoder.                     */</span>
<a name="l00345"></a>00345   <span class="comment">/*                                                                       */</span>
<a name="l00346"></a>00346   <span class="comment">/*    charstring_base :: The base address of the charstring stream.      */</span>
<a name="l00347"></a>00347   <span class="comment">/*                                                                       */</span>
<a name="l00348"></a>00348   <span class="comment">/*    charstring_len  :: The length in bytes of the charstring stream.   */</span>
<a name="l00349"></a>00349   <span class="comment">/*                                                                       */</span>
<a name="l00350"></a>00350   <span class="comment">/* &lt;Return&gt;                                                              */</span>
<a name="l00351"></a>00351   <span class="comment">/*    FreeType error code.  0 means success.                             */</span>
<a name="l00352"></a>00352   <span class="comment">/*                                                                       */</span>
<a name="l00353"></a>00353   <a class="code" href="ftconfig_8h.html#a065cda933183dff5dc368794eefa7c93">FT_LOCAL_DEF</a>( <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a> )
<a name="l00354"></a><a class="code" href="t1decode_8h.html#ab4e27dd4e3e5608400c74f06ec8e4038">00354</a>   <a class="code" href="t1decode_8c.html#a60372a0703fab80ba62fd85f06fc1602">t1_decoder_parse_charstrings</a>( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>  decoder,
<a name="l00355"></a>00355                                 <a class="code" href="fttypes_8h.html#a51f26183ca0c9f4af958939648caeccd">FT_Byte</a>*    charstring_base,
<a name="l00356"></a>00356                                 <a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>     charstring_len )
<a name="l00357"></a>00357   {
<a name="l00358"></a>00358     <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a>         error;
<a name="l00359"></a>00359     <a class="code" href="struct_t1___decoder___zone_rec__.html">T1_Decoder_Zone</a>  zone;
<a name="l00360"></a>00360     <a class="code" href="fttypes_8h.html#a51f26183ca0c9f4af958939648caeccd">FT_Byte</a>*         ip;
<a name="l00361"></a>00361     <a class="code" href="fttypes_8h.html#a51f26183ca0c9f4af958939648caeccd">FT_Byte</a>*         limit;
<a name="l00362"></a>00362     <a class="code" href="struct_t1___builder_rec__.html">T1_Builder</a>       builder = &amp;decoder-&gt;builder;
<a name="l00363"></a>00363     <a class="code" href="ftimage_8h.html#af5f230f4b253d4c7715fd2e595614c90">FT_Pos</a>           x, y, orig_x, orig_y;
<a name="l00364"></a>00364     <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>           known_othersubr_result_cnt   = 0;
<a name="l00365"></a>00365     <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>           unknown_othersubr_result_cnt = 0;
<a name="l00366"></a>00366     <a class="code" href="fttypes_8h.html#a1a832a256bb5a7e6e884afaa1a07f3ae">FT_Bool</a>          large_int;
<a name="l00367"></a>00367     <a class="code" href="fttypes_8h.html#a5f5a679cc09f758efdd0d1c5feed3c3d">FT_Fixed</a>         seed;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <a class="code" href="struct_t1___hints___funcs_rec__.html">T1_Hints_Funcs</a>   hinter;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span>    <a class="code" href="fttypes_8h.html#a1a832a256bb5a7e6e884afaa1a07f3ae">FT_Bool</a>          bol = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00373"></a>00373 <span class="preprocessor">#endif</span>
<a name="l00374"></a>00374 <span class="preprocessor"></span>
<a name="l00375"></a>00375 
<a name="l00376"></a>00376     <span class="comment">/* we don&#39;t want to touch the source code -- use macro trick */</span>
<a name="l00377"></a>00377 <span class="preprocessor">#define start_point    t1_builder_start_point</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span><span class="preprocessor">#define check_points   t1_builder_check_points</span>
<a name="l00379"></a>00379 <span class="preprocessor"></span><span class="preprocessor">#define add_point      t1_builder_add_point</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span><span class="preprocessor">#define add_point1     t1_builder_add_point1</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span><span class="preprocessor">#define add_contour    t1_builder_add_contour</span>
<a name="l00382"></a>00382 <span class="preprocessor"></span><span class="preprocessor">#define close_contour  t1_builder_close_contour</span>
<a name="l00383"></a>00383 <span class="preprocessor"></span>
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="comment">/* compute random seed from stack address of parameter */</span>
<a name="l00386"></a>00386     seed = (<a class="code" href="fttypes_8h.html#a5f5a679cc09f758efdd0d1c5feed3c3d">FT_Fixed</a>)( ( (<a class="code" href="fttypes_8h.html#a2469cb02129d36e468be22f7a8bf5b33">FT_PtrDist</a>)(<span class="keywordtype">char</span>*)&amp;seed              ^
<a name="l00387"></a>00387                          (<a class="code" href="fttypes_8h.html#a2469cb02129d36e468be22f7a8bf5b33">FT_PtrDist</a>)(<span class="keywordtype">char</span>*)&amp;decoder           ^
<a name="l00388"></a>00388                          (<a class="code" href="fttypes_8h.html#a2469cb02129d36e468be22f7a8bf5b33">FT_PtrDist</a>)(<span class="keywordtype">char</span>*)&amp;charstring_base ) &amp;
<a name="l00389"></a>00389                          <a class="code" href="ftstdlib_8h.html#ad00221e79d65c837db57262e97458eee">FT_ULONG_MAX</a> ) ;
<a name="l00390"></a>00390     seed = ( seed ^ ( seed &gt;&gt; 10 ) ^ ( seed &gt;&gt; 20 ) ) &amp; 0xFFFFL;
<a name="l00391"></a>00391     <span class="keywordflow">if</span> ( seed == 0 )
<a name="l00392"></a>00392       seed = 0x7384;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="comment">/* First of all, initialize the decoder */</span>
<a name="l00395"></a>00395     decoder-&gt;top  = decoder-&gt;stack;
<a name="l00396"></a>00396     decoder-&gt;zone = decoder-&gt;zones;
<a name="l00397"></a>00397     zone          = decoder-&gt;zones;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399     builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76badc68b3e6a84b194d0b61e2d1dc74df63">T1_Parse_Start</a>;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     hinter = (<a class="code" href="pshints_8h.html#ab410e6b2a2f803eec6a477a902f77b35">T1_Hints_Funcs</a>)builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#aeed4b5ebe5256cc07e31159b4a4a95ff">hints_funcs</a>;
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="comment">/* a font that reads BuildCharArray without setting */</span>
<a name="l00404"></a>00404     <span class="comment">/* its values first is buggy, but ...               */</span>
<a name="l00405"></a>00405     <a class="code" href="ftdebug_8h.html#a0edcd80581eabc970a562c5d284d5e7e">FT_ASSERT</a>( ( decoder-&gt;len_buildchar == 0 ) ==
<a name="l00406"></a>00406                ( decoder-&gt;buildchar == <a class="code" href="ftobjs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )  );
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">if</span> ( decoder-&gt;len_buildchar &gt; 0 )
<a name="l00409"></a>00409       <a class="code" href="ftstdlib_8h.html#a201df32e472007bb839e88dcf53a8240">ft_memset</a>( &amp;decoder-&gt;buildchar[0],
<a name="l00410"></a>00410                  0,
<a name="l00411"></a>00411                  <span class="keyword">sizeof</span>( decoder-&gt;buildchar[0] ) * decoder-&gt;len_buildchar );
<a name="l00412"></a>00412 
<a name="l00413"></a>00413     <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00414"></a>00414                 <span class="stringliteral">&quot;Start charstring\n&quot;</span> ));
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a>           = charstring_base;
<a name="l00417"></a>00417     limit = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a46fe1e4aa9bdb712ae414305f88d95db">limit</a>  = charstring_base + charstring_len;
<a name="l00418"></a>00418     ip    = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a14e9f190496672f6174ead91e375767d">cursor</a> = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a>;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     error = PSaux_Err_Ok;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     x = orig_x = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad3e29097d00fa1941ac17273c1310a92">pos_x</a>;
<a name="l00423"></a>00423     y = orig_y = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad389bf0d5182b677ed3dba05a9612530">pos_y</a>;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     <span class="comment">/* begin hints recording session, if any */</span>
<a name="l00426"></a>00426     <span class="keywordflow">if</span> ( hinter )
<a name="l00427"></a>00427       hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a41ca09a042c8e92f64822f19486a622a">open</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a> );
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     large_int = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="comment">/* now, execute loop */</span>
<a name="l00432"></a>00432     <span class="keywordflow">while</span> ( ip &lt; limit )
<a name="l00433"></a>00433     {
<a name="l00434"></a>00434       <a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>*     top   = decoder-&gt;top;
<a name="l00435"></a>00435       <a class="code" href="t1decode_8c.html#a5341f75fb9ceaf54deafa63d01fa98b6">T1_Operator</a>  op    = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">op_none</a>;
<a name="l00436"></a>00436       FT_Int32     value = 0;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 
<a name="l00439"></a>00439       <a class="code" href="ftdebug_8h.html#a0edcd80581eabc970a562c5d284d5e7e">FT_ASSERT</a>( known_othersubr_result_cnt == 0   ||
<a name="l00440"></a>00440                  unknown_othersubr_result_cnt == 0 );
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ( bol )
<a name="l00444"></a>00444       {
<a name="l00445"></a>00445         <a class="code" href="ftdebug_8h.html#a31421bde1b6252c99fc76764c22d9a48">FT_TRACE5</a>(( <span class="stringliteral">&quot; (%d)&quot;</span>, decoder-&gt;top - decoder-&gt;stack ));
<a name="l00446"></a>00446         bol = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00447"></a>00447       }
<a name="l00448"></a>00448 <span class="preprocessor">#endif</span>
<a name="l00449"></a>00449 <span class="preprocessor"></span>
<a name="l00450"></a>00450       <span class="comment">/*********************************************************************/</span>
<a name="l00451"></a>00451       <span class="comment">/*                                                                   */</span>
<a name="l00452"></a>00452       <span class="comment">/* Decode operator or operand                                        */</span>
<a name="l00453"></a>00453       <span class="comment">/*                                                                   */</span>
<a name="l00454"></a>00454       <span class="comment">/*                                                                   */</span>
<a name="l00455"></a>00455 
<a name="l00456"></a>00456       <span class="comment">/* first of all, decompress operator or value */</span>
<a name="l00457"></a>00457       <span class="keywordflow">switch</span> ( *ip++ )
<a name="l00458"></a>00458       {
<a name="l00459"></a>00459       <span class="keywordflow">case</span> 1:
<a name="l00460"></a>00460         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a4bf8498f39a6dc52b9d5fb5964f22d8e">op_hstem</a>;
<a name="l00461"></a>00461         <span class="keywordflow">break</span>;
<a name="l00462"></a>00462 
<a name="l00463"></a>00463       <span class="keywordflow">case</span> 3:
<a name="l00464"></a>00464         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a20b81043ca6f12b0f56c4ce916906222">op_vstem</a>;
<a name="l00465"></a>00465         <span class="keywordflow">break</span>;
<a name="l00466"></a>00466       <span class="keywordflow">case</span> 4:
<a name="l00467"></a>00467         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2f2c6673d7e040d4a28e415cfe085771">op_vmoveto</a>;
<a name="l00468"></a>00468         <span class="keywordflow">break</span>;
<a name="l00469"></a>00469       <span class="keywordflow">case</span> 5:
<a name="l00470"></a>00470         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a391b95dc045d3973c0cd0c3ef32d9f4a">op_rlineto</a>;
<a name="l00471"></a>00471         <span class="keywordflow">break</span>;
<a name="l00472"></a>00472       <span class="keywordflow">case</span> 6:
<a name="l00473"></a>00473         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a345381d12e43f5b182ee5e2a30fb534b">op_hlineto</a>;
<a name="l00474"></a>00474         <span class="keywordflow">break</span>;
<a name="l00475"></a>00475       <span class="keywordflow">case</span> 7:
<a name="l00476"></a>00476         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa1e4559f865967fef5d5bd04c82eebd8">op_vlineto</a>;
<a name="l00477"></a>00477         <span class="keywordflow">break</span>;
<a name="l00478"></a>00478       <span class="keywordflow">case</span> 8:
<a name="l00479"></a>00479         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5358bd2ed1ccc8889d9cfae696fb2667">op_rrcurveto</a>;
<a name="l00480"></a>00480         <span class="keywordflow">break</span>;
<a name="l00481"></a>00481       <span class="keywordflow">case</span> 9:
<a name="l00482"></a>00482         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a6f703a74ca71784db63158554283b51b">op_closepath</a>;
<a name="l00483"></a>00483         <span class="keywordflow">break</span>;
<a name="l00484"></a>00484       <span class="keywordflow">case</span> 10:
<a name="l00485"></a>00485         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">op_callsubr</a>;
<a name="l00486"></a>00486         <span class="keywordflow">break</span>;
<a name="l00487"></a>00487       <span class="keywordflow">case</span> 11:
<a name="l00488"></a>00488         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">op_return</a>;
<a name="l00489"></a>00489         <span class="keywordflow">break</span>;
<a name="l00490"></a>00490 
<a name="l00491"></a>00491       <span class="keywordflow">case</span> 13:
<a name="l00492"></a>00492         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a65d1289a9a18b41f7fe5f9884b5c37fa">op_hsbw</a>;
<a name="l00493"></a>00493         <span class="keywordflow">break</span>;
<a name="l00494"></a>00494       <span class="keywordflow">case</span> 14:
<a name="l00495"></a>00495         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5865685cd8c3379310a21f7f89ee172">op_endchar</a>;
<a name="l00496"></a>00496         <span class="keywordflow">break</span>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498       <span class="keywordflow">case</span> 15:          <span class="comment">/* undocumented, obsolete operator */</span>
<a name="l00499"></a>00499         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5c5c0a0ee577d2475e300221a46f1c8f">op_unknown15</a>;
<a name="l00500"></a>00500         <span class="keywordflow">break</span>;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502       <span class="keywordflow">case</span> 21:
<a name="l00503"></a>00503         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8829ed2c50556442df2afa87da1900ed">op_rmoveto</a>;
<a name="l00504"></a>00504         <span class="keywordflow">break</span>;
<a name="l00505"></a>00505       <span class="keywordflow">case</span> 22:
<a name="l00506"></a>00506         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a17b3215232ad4560513c87a128c456db">op_hmoveto</a>;
<a name="l00507"></a>00507         <span class="keywordflow">break</span>;
<a name="l00508"></a>00508 
<a name="l00509"></a>00509       <span class="keywordflow">case</span> 30:
<a name="l00510"></a>00510         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a55f712c565a31264a85d1323c9b3d59c">op_vhcurveto</a>;
<a name="l00511"></a>00511         <span class="keywordflow">break</span>;
<a name="l00512"></a>00512       <span class="keywordflow">case</span> 31:
<a name="l00513"></a>00513         op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027af3031b1cf9b0b560e55cf3c9c5e62819">op_hvcurveto</a>;
<a name="l00514"></a>00514         <span class="keywordflow">break</span>;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516       <span class="keywordflow">case</span> 12:
<a name="l00517"></a>00517         <span class="keywordflow">if</span> ( ip &gt; limit )
<a name="l00518"></a>00518         {
<a name="l00519"></a>00519           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00520"></a>00520                      <span class="stringliteral">&quot; invalid escape (12+EOF)\n&quot;</span> ));
<a name="l00521"></a>00521           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00522"></a>00522         }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524         <span class="keywordflow">switch</span> ( *ip++ )
<a name="l00525"></a>00525         {
<a name="l00526"></a>00526         <span class="keywordflow">case</span> 0:
<a name="l00527"></a>00527           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2c900596353103204b06b14023330823">op_dotsection</a>;
<a name="l00528"></a>00528           <span class="keywordflow">break</span>;
<a name="l00529"></a>00529         <span class="keywordflow">case</span> 1:
<a name="l00530"></a>00530           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad842c0bfcd60407d81e6db9d8230bff3">op_vstem3</a>;
<a name="l00531"></a>00531           <span class="keywordflow">break</span>;
<a name="l00532"></a>00532         <span class="keywordflow">case</span> 2:
<a name="l00533"></a>00533           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad76b5420253f810fc77191067c709c15">op_hstem3</a>;
<a name="l00534"></a>00534           <span class="keywordflow">break</span>;
<a name="l00535"></a>00535         <span class="keywordflow">case</span> 6:
<a name="l00536"></a>00536           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a64c4b96befee91f20e7fa6d74586167e">op_seac</a>;
<a name="l00537"></a>00537           <span class="keywordflow">break</span>;
<a name="l00538"></a>00538         <span class="keywordflow">case</span> 7:
<a name="l00539"></a>00539           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa10276ebf35f61596ef9fe3c7277dfc9">op_sbw</a>;
<a name="l00540"></a>00540           <span class="keywordflow">break</span>;
<a name="l00541"></a>00541         <span class="keywordflow">case</span> 12:
<a name="l00542"></a>00542           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">op_div</a>;
<a name="l00543"></a>00543           <span class="keywordflow">break</span>;
<a name="l00544"></a>00544         <span class="keywordflow">case</span> 16:
<a name="l00545"></a>00545           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027acb534d2fa24aed7c899b82d20c311d0d">op_callothersubr</a>;
<a name="l00546"></a>00546           <span class="keywordflow">break</span>;
<a name="l00547"></a>00547         <span class="keywordflow">case</span> 17:
<a name="l00548"></a>00548           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">op_pop</a>;
<a name="l00549"></a>00549           <span class="keywordflow">break</span>;
<a name="l00550"></a>00550         <span class="keywordflow">case</span> 33:
<a name="l00551"></a>00551           op = <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8722661efc05bb8edc83cfd04ae20c7a">op_setcurrentpoint</a>;
<a name="l00552"></a>00552           <span class="keywordflow">break</span>;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="keywordflow">default</span>:
<a name="l00555"></a>00555           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00556"></a>00556                      <span class="stringliteral">&quot; invalid escape (12+%d)\n&quot;</span>,
<a name="l00557"></a>00557                      ip[-1] ));
<a name="l00558"></a>00558           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00559"></a>00559         }
<a name="l00560"></a>00560         <span class="keywordflow">break</span>;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562       <span class="keywordflow">case</span> 255:    <span class="comment">/* four bytes integer */</span>
<a name="l00563"></a>00563         <span class="keywordflow">if</span> ( ip + 4 &gt; limit )
<a name="l00564"></a>00564         {
<a name="l00565"></a>00565           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00566"></a>00566                      <span class="stringliteral">&quot; unexpected EOF in integer\n&quot;</span> ));
<a name="l00567"></a>00567           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00568"></a>00568         }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570         value = (FT_Int32)( ( (<a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>)ip[0] &lt;&lt; 24 ) |
<a name="l00571"></a>00571                             ( (<a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>)ip[1] &lt;&lt; 16 ) |
<a name="l00572"></a>00572                             ( (<a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>)ip[2] &lt;&lt; 8  ) |
<a name="l00573"></a>00573                                        ip[3]         );
<a name="l00574"></a>00574         ip += 4;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576         <span class="comment">/* According to the specification, values &gt; 32000 or &lt; -32000 must */</span>
<a name="l00577"></a>00577         <span class="comment">/* be followed by a `div&#39; operator to make the result be in the    */</span>
<a name="l00578"></a>00578         <span class="comment">/* range [-32000;32000].  We expect that the second argument of    */</span>
<a name="l00579"></a>00579         <span class="comment">/* `div&#39; is not a large number.  Additionally, we don&#39;t handle     */</span>
<a name="l00580"></a>00580         <span class="comment">/* stuff like `&lt;large1&gt; &lt;large2&gt; &lt;num&gt; div &lt;num&gt; div&#39; or           */</span>
<a name="l00581"></a>00581         <span class="comment">/* &lt;large1&gt; &lt;large2&gt; &lt;num&gt; div div&#39;.  This is probably not allowed */</span>
<a name="l00582"></a>00582         <span class="comment">/* anyway.                                                         */</span>
<a name="l00583"></a>00583         <span class="keywordflow">if</span> ( value &gt; 32000 || value &lt; -32000 )
<a name="l00584"></a>00584         {
<a name="l00585"></a>00585           <span class="keywordflow">if</span> ( large_int )
<a name="l00586"></a>00586           {
<a name="l00587"></a>00587             <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00588"></a>00588                        <span class="stringliteral">&quot; no `div&#39; after large integer\n&quot;</span> ));
<a name="l00589"></a>00589           }
<a name="l00590"></a>00590           <span class="keywordflow">else</span>
<a name="l00591"></a>00591             large_int = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00592"></a>00592         }
<a name="l00593"></a>00593         <span class="keywordflow">else</span>
<a name="l00594"></a>00594         {
<a name="l00595"></a>00595           <span class="keywordflow">if</span> ( !large_int )
<a name="l00596"></a>00596             value &lt;&lt;= 16;
<a name="l00597"></a>00597         }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599         <span class="keywordflow">break</span>;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601       <span class="keywordflow">default</span>:
<a name="l00602"></a>00602         <span class="keywordflow">if</span> ( ip[-1] &gt;= 32 )
<a name="l00603"></a>00603         {
<a name="l00604"></a>00604           <span class="keywordflow">if</span> ( ip[-1] &lt; 247 )
<a name="l00605"></a>00605             value = (FT_Int32)ip[-1] - 139;
<a name="l00606"></a>00606           <span class="keywordflow">else</span>
<a name="l00607"></a>00607           {
<a name="l00608"></a>00608             <span class="keywordflow">if</span> ( ++ip &gt; limit )
<a name="l00609"></a>00609             {
<a name="l00610"></a>00610               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00611"></a>00611                          <span class="stringliteral">&quot; unexpected EOF in integer\n&quot;</span> ));
<a name="l00612"></a>00612               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00613"></a>00613             }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615             <span class="keywordflow">if</span> ( ip[-2] &lt; 251 )
<a name="l00616"></a>00616               value =  ( ( (FT_Int32)ip[-2] - 247 ) &lt;&lt; 8 ) + ip[-1] + 108;
<a name="l00617"></a>00617             <span class="keywordflow">else</span>
<a name="l00618"></a>00618               value = -( ( ( (FT_Int32)ip[-2] - 251 ) &lt;&lt; 8 ) + ip[-1] + 108 );
<a name="l00619"></a>00619           }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621           <span class="keywordflow">if</span> ( !large_int )
<a name="l00622"></a>00622             value &lt;&lt;= 16;
<a name="l00623"></a>00623         }
<a name="l00624"></a>00624         <span class="keywordflow">else</span>
<a name="l00625"></a>00625         {
<a name="l00626"></a>00626           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00627"></a>00627                      <span class="stringliteral">&quot; invalid byte (%d)\n&quot;</span>, ip[-1] ));
<a name="l00628"></a>00628           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00629"></a>00629         }
<a name="l00630"></a>00630       }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632       <span class="keywordflow">if</span> ( unknown_othersubr_result_cnt &gt; 0 )
<a name="l00633"></a>00633       {
<a name="l00634"></a>00634         <span class="keywordflow">switch</span> ( op )
<a name="l00635"></a>00635         {
<a name="l00636"></a>00636         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">op_callsubr</a>:
<a name="l00637"></a>00637         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">op_return</a>:
<a name="l00638"></a>00638         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">op_none</a>:
<a name="l00639"></a>00639         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">op_pop</a>:
<a name="l00640"></a>00640           <span class="keywordflow">break</span>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642         <span class="keywordflow">default</span>:
<a name="l00643"></a>00643           <span class="comment">/* all operands have been transferred by previous pops */</span>
<a name="l00644"></a>00644           unknown_othersubr_result_cnt = 0;
<a name="l00645"></a>00645           <span class="keywordflow">break</span>;
<a name="l00646"></a>00646         }
<a name="l00647"></a>00647       }
<a name="l00648"></a>00648 
<a name="l00649"></a>00649       <span class="keywordflow">if</span> ( large_int &amp;&amp; !( op == <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">op_none</a> || op == <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">op_div</a> ) )
<a name="l00650"></a>00650       {
<a name="l00651"></a>00651         <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00652"></a>00652                    <span class="stringliteral">&quot; no `div&#39; after large integer\n&quot;</span> ));
<a name="l00653"></a>00653 
<a name="l00654"></a>00654         large_int = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00655"></a>00655       }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657       <span class="comment">/*********************************************************************/</span>
<a name="l00658"></a>00658       <span class="comment">/*                                                                   */</span>
<a name="l00659"></a>00659       <span class="comment">/*  Push value on stack, or process operator                         */</span>
<a name="l00660"></a>00660       <span class="comment">/*                                                                   */</span>
<a name="l00661"></a>00661       <span class="comment">/*                                                                   */</span>
<a name="l00662"></a>00662       <span class="keywordflow">if</span> ( op == <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5b2e98d4a993f7eeddc33338ccbfbec">op_none</a> )
<a name="l00663"></a>00663       {
<a name="l00664"></a>00664         <span class="keywordflow">if</span> ( top - decoder-&gt;stack &gt;= <a class="code" href="ftoption_8h.html#a2d9bf92424fd81e25c1ed03f80bb5c80">T1_MAX_CHARSTRINGS_OPERANDS</a> )
<a name="l00665"></a>00665         {
<a name="l00666"></a>00666           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings: stack overflow\n&quot;</span> ));
<a name="l00667"></a>00667           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00668"></a>00668         }
<a name="l00669"></a>00669 
<a name="l00670"></a>00670 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l00671"></a>00671 <span class="preprocessor"></span>        <span class="keywordflow">if</span> ( large_int )
<a name="l00672"></a>00672           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; %ld&quot;</span>, value ));
<a name="l00673"></a>00673         <span class="keywordflow">else</span>
<a name="l00674"></a>00674           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; %ld&quot;</span>, (FT_Int32)( value &gt;&gt; 16 ) ));
<a name="l00675"></a>00675 <span class="preprocessor">#endif</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>
<a name="l00677"></a>00677         *top++       = value;
<a name="l00678"></a>00678         decoder-&gt;top = top;
<a name="l00679"></a>00679       }
<a name="l00680"></a>00680       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( op == <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027acb534d2fa24aed7c899b82d20c311d0d">op_callothersubr</a> )  <span class="comment">/* callothersubr */</span>
<a name="l00681"></a>00681       {
<a name="l00682"></a>00682         <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  subr_no;
<a name="l00683"></a>00683         <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  arg_cnt;
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l00687"></a>00687 <span class="preprocessor"></span>        <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; callothersubr\n&quot;</span> ));
<a name="l00688"></a>00688         bol = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00689"></a>00689 <span class="preprocessor">#endif</span>
<a name="l00690"></a>00690 <span class="preprocessor"></span>
<a name="l00691"></a>00691         <span class="keywordflow">if</span> ( top - decoder-&gt;stack &lt; 2 )
<a name="l00692"></a>00692           <span class="keywordflow">goto</span> Stack_Underflow;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694         top -= 2;
<a name="l00695"></a>00695 
<a name="l00696"></a>00696         subr_no = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[1] &gt;&gt; 16 );
<a name="l00697"></a>00697         arg_cnt = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[0] &gt;&gt; 16 );
<a name="l00698"></a>00698 
<a name="l00699"></a>00699         <span class="comment">/***********************************************************/</span>
<a name="l00700"></a>00700         <span class="comment">/*                                                         */</span>
<a name="l00701"></a>00701         <span class="comment">/* remove all operands to callothersubr from the stack     */</span>
<a name="l00702"></a>00702         <span class="comment">/*                                                         */</span>
<a name="l00703"></a>00703         <span class="comment">/* for handled othersubrs, where we know the number of     */</span>
<a name="l00704"></a>00704         <span class="comment">/* arguments, we increase the stack by the value of        */</span>
<a name="l00705"></a>00705         <span class="comment">/* known_othersubr_result_cnt                              */</span>
<a name="l00706"></a>00706         <span class="comment">/*                                                         */</span>
<a name="l00707"></a>00707         <span class="comment">/* for unhandled othersubrs the following pops adjust the  */</span>
<a name="l00708"></a>00708         <span class="comment">/* stack pointer as necessary                              */</span>
<a name="l00709"></a>00709 
<a name="l00710"></a>00710         <span class="keywordflow">if</span> ( arg_cnt &gt; top - decoder-&gt;stack )
<a name="l00711"></a>00711           <span class="keywordflow">goto</span> Stack_Underflow;
<a name="l00712"></a>00712 
<a name="l00713"></a>00713         top -= arg_cnt;
<a name="l00714"></a>00714 
<a name="l00715"></a>00715         known_othersubr_result_cnt   = 0;
<a name="l00716"></a>00716         unknown_othersubr_result_cnt = 0;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718         <span class="comment">/* XXX TODO: The checks to `arg_count == &lt;whatever&gt;&#39;       */</span>
<a name="l00719"></a>00719         <span class="comment">/* might not be correct; an othersubr expects a certain    */</span>
<a name="l00720"></a>00720         <span class="comment">/* number of operands on the PostScript stack (as opposed  */</span>
<a name="l00721"></a>00721         <span class="comment">/* to the T1 stack) but it doesn&#39;t have to put them there  */</span>
<a name="l00722"></a>00722         <span class="comment">/* by itself; previous othersubrs might have left the      */</span>
<a name="l00723"></a>00723         <span class="comment">/* operands there if they were not followed by an          */</span>
<a name="l00724"></a>00724         <span class="comment">/* appropriate number of pops                              */</span>
<a name="l00725"></a>00725         <span class="comment">/*                                                         */</span>
<a name="l00726"></a>00726         <span class="comment">/* On the other hand, Adobe Reader 7.0.8 for Linux doesn&#39;t */</span>
<a name="l00727"></a>00727         <span class="comment">/* accept a font that contains charstrings like            */</span>
<a name="l00728"></a>00728         <span class="comment">/*                                                         */</span>
<a name="l00729"></a>00729         <span class="comment">/*     100 200 2 20 callothersubr                          */</span>
<a name="l00730"></a>00730         <span class="comment">/*     300 1 20 callothersubr pop                          */</span>
<a name="l00731"></a>00731         <span class="comment">/*                                                         */</span>
<a name="l00732"></a>00732         <span class="comment">/* Perhaps this is the reason why BuildCharArray exists.   */</span>
<a name="l00733"></a>00733 
<a name="l00734"></a>00734         <span class="keywordflow">switch</span> ( subr_no )
<a name="l00735"></a>00735         {
<a name="l00736"></a>00736         <span class="keywordflow">case</span> 1:                     <span class="comment">/* start flex feature */</span>
<a name="l00737"></a>00737           <span class="keywordflow">if</span> ( arg_cnt != 0 )
<a name="l00738"></a>00738             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740           decoder-&gt;flex_state        = 1;
<a name="l00741"></a>00741           decoder-&gt;num_flex_vectors  = 0;
<a name="l00742"></a>00742           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) ||
<a name="l00743"></a>00743                <a class="code" href="t1decode_8c.html#abb2307d7c9ff1cfc3bf71de0f68f3174">check_points</a>( builder, 6 )   )
<a name="l00744"></a>00744             <span class="keywordflow">goto</span> Fail;
<a name="l00745"></a>00745           <span class="keywordflow">break</span>;
<a name="l00746"></a>00746 
<a name="l00747"></a>00747         <span class="keywordflow">case</span> 2:                     <span class="comment">/* add flex vectors */</span>
<a name="l00748"></a>00748           {
<a name="l00749"></a>00749             <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  idx;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751 
<a name="l00752"></a>00752             <span class="keywordflow">if</span> ( arg_cnt != 0 )
<a name="l00753"></a>00753               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755             <span class="comment">/* note that we should not add a point for index 0; */</span>
<a name="l00756"></a>00756             <span class="comment">/* this will move our current position to the flex  */</span>
<a name="l00757"></a>00757             <span class="comment">/* point without adding any point to the outline    */</span>
<a name="l00758"></a>00758             idx = decoder-&gt;num_flex_vectors++;
<a name="l00759"></a>00759             <span class="keywordflow">if</span> ( idx &gt; 0 &amp;&amp; idx &lt; 7 )
<a name="l00760"></a>00760               <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder,
<a name="l00761"></a>00761                          x,
<a name="l00762"></a>00762                          y,
<a name="l00763"></a>00763                          (<a class="code" href="fttypes_8h.html#a51f26183ca0c9f4af958939648caeccd">FT_Byte</a>)( idx == 3 || idx == 6 ) );
<a name="l00764"></a>00764           }
<a name="l00765"></a>00765           <span class="keywordflow">break</span>;
<a name="l00766"></a>00766 
<a name="l00767"></a>00767         <span class="keywordflow">case</span> 0:                     <span class="comment">/* end flex feature */</span>
<a name="l00768"></a>00768           <span class="keywordflow">if</span> ( arg_cnt != 3 )
<a name="l00769"></a>00769             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00770"></a>00770 
<a name="l00771"></a>00771           <span class="keywordflow">if</span> ( decoder-&gt;flex_state       == 0 ||
<a name="l00772"></a>00772                decoder-&gt;num_flex_vectors != 7 )
<a name="l00773"></a>00773           {
<a name="l00774"></a>00774             <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00775"></a>00775                        <span class="stringliteral">&quot; unexpected flex end\n&quot;</span> ));
<a name="l00776"></a>00776             <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00777"></a>00777           }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779           <span class="comment">/* the two `results&#39; are popped by the following setcurrentpoint */</span>
<a name="l00780"></a>00780           top[0] = x;
<a name="l00781"></a>00781           top[1] = y;
<a name="l00782"></a>00782           known_othersubr_result_cnt = 2;
<a name="l00783"></a>00783           <span class="keywordflow">break</span>;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785         <span class="keywordflow">case</span> 3:                     <span class="comment">/* change hints */</span>
<a name="l00786"></a>00786           <span class="keywordflow">if</span> ( arg_cnt != 1 )
<a name="l00787"></a>00787             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00788"></a>00788 
<a name="l00789"></a>00789           known_othersubr_result_cnt = 1;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791           <span class="keywordflow">if</span> ( hinter )
<a name="l00792"></a>00792             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a5646878cdabd593389e28cffd8b077cb">reset</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a6cabaa34c7f020e871a73a1b54371f98">current</a>-&gt;<a class="code" href="struct_f_t___outline__.html#a7ebcf3c33231af88655534d1ac02b66e">n_points</a> );
<a name="l00793"></a>00793           <span class="keywordflow">break</span>;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795         <span class="keywordflow">case</span> 12:
<a name="l00796"></a>00796         <span class="keywordflow">case</span> 13:
<a name="l00797"></a>00797           <span class="comment">/* counter control hints, clear stack */</span>
<a name="l00798"></a>00798           top = decoder-&gt;stack;
<a name="l00799"></a>00799           <span class="keywordflow">break</span>;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801         <span class="keywordflow">case</span> 14:
<a name="l00802"></a>00802         <span class="keywordflow">case</span> 15:
<a name="l00803"></a>00803         <span class="keywordflow">case</span> 16:
<a name="l00804"></a>00804         <span class="keywordflow">case</span> 17:
<a name="l00805"></a>00805         <span class="keywordflow">case</span> 18:                    <span class="comment">/* multiple masters */</span>
<a name="l00806"></a>00806           {
<a name="l00807"></a>00807             <a class="code" href="struct_p_s___blend_rec__.html">PS_Blend</a>  blend = decoder-&gt;blend;
<a name="l00808"></a>00808             <a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>   num_points, nn, mm;
<a name="l00809"></a>00809             <a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>*  delta;
<a name="l00810"></a>00810             <a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>*  values;
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 
<a name="l00813"></a>00813             <span class="keywordflow">if</span> ( !blend )
<a name="l00814"></a>00814             {
<a name="l00815"></a>00815               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00816"></a>00816                          <span class="stringliteral">&quot; unexpected multiple masters operator\n&quot;</span> ));
<a name="l00817"></a>00817               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00818"></a>00818             }
<a name="l00819"></a>00819 
<a name="l00820"></a>00820             num_points = (<a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>)subr_no - 13 + ( subr_no == 18 );
<a name="l00821"></a>00821             <span class="keywordflow">if</span> ( arg_cnt != (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( num_points * blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ad81cbf3697f89908e9c15071e2ab9cac">num_designs</a> ) )
<a name="l00822"></a>00822             {
<a name="l00823"></a>00823               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l00824"></a>00824                          <span class="stringliteral">&quot; incorrect number of multiple masters arguments\n&quot;</span> ));
<a name="l00825"></a>00825               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l00826"></a>00826             }
<a name="l00827"></a>00827 
<a name="l00828"></a>00828             <span class="comment">/* we want to compute:                                   */</span>
<a name="l00829"></a>00829             <span class="comment">/*                                                       */</span>
<a name="l00830"></a>00830             <span class="comment">/*  a0*w0 + a1*w1 + ... + ak*wk                          */</span>
<a name="l00831"></a>00831             <span class="comment">/*                                                       */</span>
<a name="l00832"></a>00832             <span class="comment">/* but we only have the a0, a1-a0, a2-a0, .. ak-a0       */</span>
<a name="l00833"></a>00833             <span class="comment">/* however, given that w0 + w1 + ... + wk == 1, we can   */</span>
<a name="l00834"></a>00834             <span class="comment">/* rewrite it easily as:                                 */</span>
<a name="l00835"></a>00835             <span class="comment">/*                                                       */</span>
<a name="l00836"></a>00836             <span class="comment">/*  a0 + (a1-a0)*w1 + (a2-a0)*w2 + .. + (ak-a0)*wk       */</span>
<a name="l00837"></a>00837             <span class="comment">/*                                                       */</span>
<a name="l00838"></a>00838             <span class="comment">/* where k == num_designs-1                              */</span>
<a name="l00839"></a>00839             <span class="comment">/*                                                       */</span>
<a name="l00840"></a>00840             <span class="comment">/* I guess that&#39;s why it&#39;s written in this `compact&#39;     */</span>
<a name="l00841"></a>00841             <span class="comment">/* form.                                                 */</span>
<a name="l00842"></a>00842             <span class="comment">/*                                                       */</span>
<a name="l00843"></a>00843             delta  = top + num_points;
<a name="l00844"></a>00844             values = top;
<a name="l00845"></a>00845             <span class="keywordflow">for</span> ( nn = 0; nn &lt; num_points; nn++ )
<a name="l00846"></a>00846             {
<a name="l00847"></a>00847               <a class="code" href="fttypes_8h.html#a7fa72a1f0e79fb1860c5965789024d6f">FT_Long</a>  tmp = values[0];
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00850"></a>00850               <span class="keywordflow">for</span> ( mm = 1; mm &lt; blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ad81cbf3697f89908e9c15071e2ab9cac">num_designs</a>; mm++ )
<a name="l00851"></a>00851                 tmp += <a class="code" href="freetype_8h.html#aeb37c2858e2851e15465580de1d1d218">FT_MulFix</a>( *delta++, blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ae3dcbb2aaee676fdc3d5bde890b2cc78">weight_vector</a>[mm] );
<a name="l00852"></a>00852 
<a name="l00853"></a>00853               *values++ = tmp;
<a name="l00854"></a>00854             }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856             known_othersubr_result_cnt = num_points;
<a name="l00857"></a>00857             <span class="keywordflow">break</span>;
<a name="l00858"></a>00858           }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860         <span class="keywordflow">case</span> 19:
<a name="l00861"></a>00861           <span class="comment">/* &lt;idx&gt; 1 19 callothersubr                             */</span>
<a name="l00862"></a>00862           <span class="comment">/* =&gt; replace elements starting from index cvi( &lt;idx&gt; ) */</span>
<a name="l00863"></a>00863           <span class="comment">/*    of BuildCharArray with WeightVector               */</span>
<a name="l00864"></a>00864           {
<a name="l00865"></a>00865             <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>    idx;
<a name="l00866"></a>00866             <a class="code" href="struct_p_s___blend_rec__.html">PS_Blend</a>  blend = decoder-&gt;blend;
<a name="l00867"></a>00867 
<a name="l00868"></a>00868 
<a name="l00869"></a>00869             <span class="keywordflow">if</span> ( arg_cnt != 1 || blend == <a class="code" href="ftobjs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )
<a name="l00870"></a>00870               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872             idx = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[0] &gt;&gt; 16 );
<a name="l00873"></a>00873 
<a name="l00874"></a>00874             <span class="keywordflow">if</span> ( idx &lt; 0                                           ||
<a name="l00875"></a>00875                  idx + blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ad81cbf3697f89908e9c15071e2ab9cac">num_designs</a> &gt; decoder-&gt;len_buildchar )
<a name="l00876"></a>00876               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878             <a class="code" href="ftstdlib_8h.html#a0b36ea64fb3c93ebf51e44bfac5f53cc">ft_memcpy</a>( &amp;decoder-&gt;buildchar[idx],
<a name="l00879"></a>00879                        blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ae3dcbb2aaee676fdc3d5bde890b2cc78">weight_vector</a>,
<a name="l00880"></a>00880                        blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ad81cbf3697f89908e9c15071e2ab9cac">num_designs</a> *
<a name="l00881"></a>00881                          <span class="keyword">sizeof</span>( blend-&gt;<a class="code" href="struct_p_s___blend_rec__.html#ae3dcbb2aaee676fdc3d5bde890b2cc78">weight_vector</a>[0] ) );
<a name="l00882"></a>00882           }
<a name="l00883"></a>00883           <span class="keywordflow">break</span>;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885         <span class="keywordflow">case</span> 20:
<a name="l00886"></a>00886           <span class="comment">/* &lt;arg1&gt; &lt;arg2&gt; 2 20 callothersubr pop   */</span>
<a name="l00887"></a>00887           <span class="comment">/* ==&gt; push &lt;arg1&gt; + &lt;arg2&gt; onto T1 stack */</span>
<a name="l00888"></a>00888           <span class="keywordflow">if</span> ( arg_cnt != 2 )
<a name="l00889"></a>00889             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891           top[0] += top[1]; <span class="comment">/* XXX (over|under)flow */</span>
<a name="l00892"></a>00892 
<a name="l00893"></a>00893           known_othersubr_result_cnt = 1;
<a name="l00894"></a>00894           <span class="keywordflow">break</span>;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896         <span class="keywordflow">case</span> 21:
<a name="l00897"></a>00897           <span class="comment">/* &lt;arg1&gt; &lt;arg2&gt; 2 21 callothersubr pop   */</span>
<a name="l00898"></a>00898           <span class="comment">/* ==&gt; push &lt;arg1&gt; - &lt;arg2&gt; onto T1 stack */</span>
<a name="l00899"></a>00899           <span class="keywordflow">if</span> ( arg_cnt != 2 )
<a name="l00900"></a>00900             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902           top[0] -= top[1]; <span class="comment">/* XXX (over|under)flow */</span>
<a name="l00903"></a>00903 
<a name="l00904"></a>00904           known_othersubr_result_cnt = 1;
<a name="l00905"></a>00905           <span class="keywordflow">break</span>;
<a name="l00906"></a>00906 
<a name="l00907"></a>00907         <span class="keywordflow">case</span> 22:
<a name="l00908"></a>00908           <span class="comment">/* &lt;arg1&gt; &lt;arg2&gt; 2 22 callothersubr pop   */</span>
<a name="l00909"></a>00909           <span class="comment">/* ==&gt; push &lt;arg1&gt; * &lt;arg2&gt; onto T1 stack */</span>
<a name="l00910"></a>00910           <span class="keywordflow">if</span> ( arg_cnt != 2 )
<a name="l00911"></a>00911             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00912"></a>00912 
<a name="l00913"></a>00913           top[0] = <a class="code" href="freetype_8h.html#aeb37c2858e2851e15465580de1d1d218">FT_MulFix</a>( top[0], top[1] );
<a name="l00914"></a>00914 
<a name="l00915"></a>00915           known_othersubr_result_cnt = 1;
<a name="l00916"></a>00916           <span class="keywordflow">break</span>;
<a name="l00917"></a>00917 
<a name="l00918"></a>00918         <span class="keywordflow">case</span> 23:
<a name="l00919"></a>00919           <span class="comment">/* &lt;arg1&gt; &lt;arg2&gt; 2 23 callothersubr pop   */</span>
<a name="l00920"></a>00920           <span class="comment">/* ==&gt; push &lt;arg1&gt; / &lt;arg2&gt; onto T1 stack */</span>
<a name="l00921"></a>00921           <span class="keywordflow">if</span> ( arg_cnt != 2 || top[1] == 0 )
<a name="l00922"></a>00922             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924           top[0] = <a class="code" href="freetype_8h.html#a5248df90a0d076e6543b09284face353">FT_DivFix</a>( top[0], top[1] );
<a name="l00925"></a>00925 
<a name="l00926"></a>00926           known_othersubr_result_cnt = 1;
<a name="l00927"></a>00927           <span class="keywordflow">break</span>;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929         <span class="keywordflow">case</span> 24:
<a name="l00930"></a>00930           <span class="comment">/* &lt;val&gt; &lt;idx&gt; 2 24 callothersubr               */</span>
<a name="l00931"></a>00931           <span class="comment">/* ==&gt; set BuildCharArray[cvi( &lt;idx&gt; )] = &lt;val&gt; */</span>
<a name="l00932"></a>00932           {
<a name="l00933"></a>00933             <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>    idx;
<a name="l00934"></a>00934             <a class="code" href="struct_p_s___blend_rec__.html">PS_Blend</a>  blend = decoder-&gt;blend;
<a name="l00935"></a>00935 
<a name="l00936"></a>00936 
<a name="l00937"></a>00937             <span class="keywordflow">if</span> ( arg_cnt != 2 || blend == <a class="code" href="ftobjs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )
<a name="l00938"></a>00938               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00939"></a>00939 
<a name="l00940"></a>00940             idx = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[1] &gt;&gt; 16 );
<a name="l00941"></a>00941 
<a name="l00942"></a>00942             <span class="keywordflow">if</span> ( idx &lt; 0 || (<a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>) idx &gt;= decoder-&gt;len_buildchar )
<a name="l00943"></a>00943               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00944"></a>00944 
<a name="l00945"></a>00945             decoder-&gt;buildchar[idx] = top[0];
<a name="l00946"></a>00946           }
<a name="l00947"></a>00947           <span class="keywordflow">break</span>;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949         <span class="keywordflow">case</span> 25:
<a name="l00950"></a>00950           <span class="comment">/* &lt;idx&gt; 1 25 callothersubr pop        */</span>
<a name="l00951"></a>00951           <span class="comment">/* ==&gt; push BuildCharArray[cvi( idx )] */</span>
<a name="l00952"></a>00952           <span class="comment">/*     onto T1 stack                   */</span>
<a name="l00953"></a>00953           {
<a name="l00954"></a>00954             <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>    idx;
<a name="l00955"></a>00955             <a class="code" href="struct_p_s___blend_rec__.html">PS_Blend</a>  blend = decoder-&gt;blend;
<a name="l00956"></a>00956 
<a name="l00957"></a>00957 
<a name="l00958"></a>00958             <span class="keywordflow">if</span> ( arg_cnt != 1 || blend == <a class="code" href="ftobjs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )
<a name="l00959"></a>00959               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961             idx = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[0] &gt;&gt; 16 );
<a name="l00962"></a>00962 
<a name="l00963"></a>00963             <span class="keywordflow">if</span> ( idx &lt; 0 || (<a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>) idx &gt;= decoder-&gt;len_buildchar )
<a name="l00964"></a>00964               <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00965"></a>00965 
<a name="l00966"></a>00966             top[0] = decoder-&gt;buildchar[idx];
<a name="l00967"></a>00967           }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969           known_othersubr_result_cnt = 1;
<a name="l00970"></a>00970           <span class="keywordflow">break</span>;
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="preprocessor">#if 0</span>
<a name="l00973"></a>00973 <span class="preprocessor"></span>        <span class="keywordflow">case</span> 26:
<a name="l00974"></a>00974           <span class="comment">/* &lt;val&gt; mark &lt;idx&gt; ==&gt; set BuildCharArray[cvi( &lt;idx&gt; )] = &lt;val&gt;, */</span>
<a name="l00975"></a>00975           <span class="comment">/*                      leave mark on T1 stack                    */</span>
<a name="l00976"></a>00976           <span class="comment">/* &lt;val&gt; &lt;idx&gt;      ==&gt; set BuildCharArray[cvi( &lt;idx&gt; )] = &lt;val&gt;  */</span>
<a name="l00977"></a>00977           XXX which routine has left its mark on the (<a class="code" href="fterrdef_8h.html#aebf60d4d8a5b851d8502e4b721ac5f3d">PostScript</a>) stack?;
<a name="l00978"></a>00978           <span class="keywordflow">break</span>;
<a name="l00979"></a>00979 <span class="preprocessor">#endif</span>
<a name="l00980"></a>00980 <span class="preprocessor"></span>
<a name="l00981"></a>00981         <span class="keywordflow">case</span> 27:
<a name="l00982"></a>00982           <span class="comment">/* &lt;res1&gt; &lt;res2&gt; &lt;val1&gt; &lt;val2&gt; 4 27 callothersubr pop */</span>
<a name="l00983"></a>00983           <span class="comment">/* ==&gt; push &lt;res1&gt; onto T1 stack if &lt;val1&gt; &lt;= &lt;val2&gt;, */</span>
<a name="l00984"></a>00984           <span class="comment">/*     otherwise push &lt;res2&gt;                          */</span>
<a name="l00985"></a>00985           <span class="keywordflow">if</span> ( arg_cnt != 4 )
<a name="l00986"></a>00986             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988           <span class="keywordflow">if</span> ( top[2] &gt; top[3] )
<a name="l00989"></a>00989             top[0] = top[1];
<a name="l00990"></a>00990 
<a name="l00991"></a>00991           known_othersubr_result_cnt = 1;
<a name="l00992"></a>00992           <span class="keywordflow">break</span>;
<a name="l00993"></a>00993 
<a name="l00994"></a>00994         <span class="keywordflow">case</span> 28:
<a name="l00995"></a>00995           <span class="comment">/* 0 28 callothersubr pop                               */</span>
<a name="l00996"></a>00996           <span class="comment">/* =&gt; push random value from interval [0, 1) onto stack */</span>
<a name="l00997"></a>00997           <span class="keywordflow">if</span> ( arg_cnt != 0 )
<a name="l00998"></a>00998             <span class="keywordflow">goto</span> Unexpected_OtherSubr;
<a name="l00999"></a>00999 
<a name="l01000"></a>01000           {
<a name="l01001"></a>01001             <a class="code" href="fttypes_8h.html#a5f5a679cc09f758efdd0d1c5feed3c3d">FT_Fixed</a>  Rand;
<a name="l01002"></a>01002 
<a name="l01003"></a>01003 
<a name="l01004"></a>01004             Rand = seed;
<a name="l01005"></a>01005             <span class="keywordflow">if</span> ( Rand &gt;= 0x8000L )
<a name="l01006"></a>01006               Rand++;
<a name="l01007"></a>01007 
<a name="l01008"></a>01008             top[0] = Rand;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010             seed = <a class="code" href="freetype_8h.html#aeb37c2858e2851e15465580de1d1d218">FT_MulFix</a>( seed, 0x10000L - seed );
<a name="l01011"></a>01011             <span class="keywordflow">if</span> ( seed == 0 )
<a name="l01012"></a>01012               seed += 0x2873;
<a name="l01013"></a>01013           }
<a name="l01014"></a>01014 
<a name="l01015"></a>01015           known_othersubr_result_cnt = 1;
<a name="l01016"></a>01016           <span class="keywordflow">break</span>;
<a name="l01017"></a>01017 
<a name="l01018"></a>01018         <span class="keywordflow">default</span>:
<a name="l01019"></a>01019           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01020"></a>01020                      <span class="stringliteral">&quot; unknown othersubr [%d %d], wish me luck\n&quot;</span>,
<a name="l01021"></a>01021                      arg_cnt, subr_no ));
<a name="l01022"></a>01022           unknown_othersubr_result_cnt = arg_cnt;
<a name="l01023"></a>01023           <span class="keywordflow">break</span>;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025         Unexpected_OtherSubr:
<a name="l01026"></a>01026           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01027"></a>01027                      <span class="stringliteral">&quot; invalid othersubr [%d %d]\n&quot;</span>, arg_cnt, subr_no ));
<a name="l01028"></a>01028           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01029"></a>01029         }
<a name="l01030"></a>01030 
<a name="l01031"></a>01031         top += known_othersubr_result_cnt;
<a name="l01032"></a>01032 
<a name="l01033"></a>01033         decoder-&gt;top = top;
<a name="l01034"></a>01034       }
<a name="l01035"></a>01035       <span class="keywordflow">else</span>  <span class="comment">/* general operator */</span>
<a name="l01036"></a>01036       {
<a name="l01037"></a>01037         <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  num_args = t1_args_count[op];
<a name="l01038"></a>01038 
<a name="l01039"></a>01039 
<a name="l01040"></a>01040         <a class="code" href="ftdebug_8h.html#a0edcd80581eabc970a562c5d284d5e7e">FT_ASSERT</a>( num_args &gt;= 0 );
<a name="l01041"></a>01041 
<a name="l01042"></a>01042         <span class="keywordflow">if</span> ( top - decoder-&gt;stack &lt; num_args )
<a name="l01043"></a>01043           <span class="keywordflow">goto</span> Stack_Underflow;
<a name="l01044"></a>01044 
<a name="l01045"></a>01045         <span class="comment">/* XXX Operators usually take their operands from the        */</span>
<a name="l01046"></a>01046         <span class="comment">/*     bottom of the stack, i.e., the operands are           */</span>
<a name="l01047"></a>01047         <span class="comment">/*     decoder-&gt;stack[0], ..., decoder-&gt;stack[num_args - 1]; */</span>
<a name="l01048"></a>01048         <span class="comment">/*     only div, callsubr, and callothersubr are different.  */</span>
<a name="l01049"></a>01049         <span class="comment">/*     In practice it doesn&#39;t matter (?).                    */</span>
<a name="l01050"></a>01050 
<a name="l01051"></a>01051 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l01052"></a>01052 <span class="preprocessor"></span>
<a name="l01053"></a>01053         <span class="keywordflow">switch</span> ( op )
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">op_callsubr</a>:
<a name="l01056"></a>01056         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">op_div</a>:
<a name="l01057"></a>01057         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027acb534d2fa24aed7c899b82d20c311d0d">op_callothersubr</a>:
<a name="l01058"></a>01058         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">op_pop</a>:
<a name="l01059"></a>01059         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">op_return</a>:
<a name="l01060"></a>01060           <span class="keywordflow">break</span>;
<a name="l01061"></a>01061 
<a name="l01062"></a>01062         <span class="keywordflow">default</span>:
<a name="l01063"></a>01063           <span class="keywordflow">if</span> ( top - decoder-&gt;stack != num_args )
<a name="l01064"></a>01064             <a class="code" href="ftdebug_8h.html#a2626b122437b69ef36f9723712feb19f">FT_TRACE0</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01065"></a>01065                         <span class="stringliteral">&quot; too much operands on the stack&quot;</span>
<a name="l01066"></a>01066                         <span class="stringliteral">&quot; (seen %d, expected %d)\n&quot;</span>,
<a name="l01067"></a>01067                         top - decoder-&gt;stack, num_args ));
<a name="l01068"></a>01068             <span class="keywordflow">break</span>;
<a name="l01069"></a>01069         }
<a name="l01070"></a>01070 
<a name="l01071"></a>01071 <span class="preprocessor">#endif </span><span class="comment">/* FT_DEBUG_LEVEL_TRACE */</span>
<a name="l01072"></a>01072 
<a name="l01073"></a>01073         top -= num_args;
<a name="l01074"></a>01074 
<a name="l01075"></a>01075         <span class="keywordflow">switch</span> ( op )
<a name="l01076"></a>01076         {
<a name="l01077"></a>01077         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae5865685cd8c3379310a21f7f89ee172">op_endchar</a>:
<a name="l01078"></a>01078           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; endchar\n&quot;</span> ));
<a name="l01079"></a>01079 
<a name="l01080"></a>01080           <a class="code" href="t1decode_8c.html#ae7d9ff6124cf475bbff372ac4142bfbd">close_contour</a>( builder );
<a name="l01081"></a>01081 
<a name="l01082"></a>01082           <span class="comment">/* close hints recording session */</span>
<a name="l01083"></a>01083           <span class="keywordflow">if</span> ( hinter )
<a name="l01084"></a>01084           {
<a name="l01085"></a>01085             <span class="keywordflow">if</span> ( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#aa6d879215bff42f4b3851a9151c78505">close</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a6cabaa34c7f020e871a73a1b54371f98">current</a>-&gt;<a class="code" href="struct_f_t___outline__.html#a7ebcf3c33231af88655534d1ac02b66e">n_points</a> ) )
<a name="l01086"></a>01086               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088             <span class="comment">/* apply hints to the loaded glyph outline now */</span>
<a name="l01089"></a>01089             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a3fb5f01de31da9efb2ae8f5251b4d506">apply</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>,
<a name="l01090"></a>01090                            builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a6cabaa34c7f020e871a73a1b54371f98">current</a>,
<a name="l01091"></a>01091                            (<a class="code" href="pshints_8h.html#aed4220b62b12a76456f9f47bafa5fe52">PSH_Globals</a>)builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ae94605dc79c1d54c1b59423046b38671">hints_globals</a>,
<a name="l01092"></a>01092                            decoder-&gt;hint_mode );
<a name="l01093"></a>01093           }
<a name="l01094"></a>01094 
<a name="l01095"></a>01095           <span class="comment">/* add current outline to the glyph slot */</span>
<a name="l01096"></a>01096           <a class="code" href="ftgloadr_8h.html#a05e75ff8be73536b15ebbc02f432e246">FT_GlyphLoader_Add</a>( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ae2202eaee7c0937435419d559374bd3c">loader</a> );
<a name="l01097"></a>01097 
<a name="l01098"></a>01098           <span class="comment">/* the compiler should optimize away this empty loop but ... */</span>
<a name="l01099"></a>01099 
<a name="l01100"></a>01100 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l01101"></a>01101 <span class="preprocessor"></span>
<a name="l01102"></a>01102           <span class="keywordflow">if</span> ( decoder-&gt;len_buildchar &gt; 0 )
<a name="l01103"></a>01103           {
<a name="l01104"></a>01104             <a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>  i;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106 
<a name="l01107"></a>01107             <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;BuildCharArray = [ &quot;</span> ));
<a name="l01108"></a>01108 
<a name="l01109"></a>01109             <span class="keywordflow">for</span> ( i = 0; i &lt; decoder-&gt;len_buildchar; ++i )
<a name="l01110"></a>01110               <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;%d &quot;</span>, decoder-&gt;buildchar[ i ] ));
<a name="l01111"></a>01111 
<a name="l01112"></a>01112             <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;]\n&quot;</span> ));
<a name="l01113"></a>01113           }
<a name="l01114"></a>01114 
<a name="l01115"></a>01115 <span class="preprocessor">#endif </span><span class="comment">/* FT_DEBUG_LEVEL_TRACE */</span>
<a name="l01116"></a>01116 
<a name="l01117"></a>01117           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;\n&quot;</span> ));
<a name="l01118"></a>01118 
<a name="l01119"></a>01119           <span class="comment">/* return now! */</span>
<a name="l01120"></a>01120           <span class="keywordflow">return</span> PSaux_Err_Ok;
<a name="l01121"></a>01121 
<a name="l01122"></a>01122         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a65d1289a9a18b41f7fe5f9884b5c37fa">op_hsbw</a>:
<a name="l01123"></a>01123           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hsbw&quot;</span> ));
<a name="l01124"></a>01124 
<a name="l01125"></a>01125           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76ba03da278b5f6cc13d9ddf9872a45d27c2">T1_Parse_Have_Width</a>;
<a name="l01126"></a>01126 
<a name="l01127"></a>01127           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a> += top[0];
<a name="l01128"></a>01128           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a>       = top[1];
<a name="l01129"></a>01129           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>.<a class="code" href="struct_f_t___vector__.html#ac3246ed214e880047ec74eeb15f8b973">y</a>       = 0;
<a name="l01130"></a>01130 
<a name="l01131"></a>01131           orig_x = x = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad3e29097d00fa1941ac17273c1310a92">pos_x</a> + top[0];
<a name="l01132"></a>01132           orig_y = y = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad389bf0d5182b677ed3dba05a9612530">pos_y</a>;
<a name="l01133"></a>01133 
<a name="l01134"></a>01134           <a class="code" href="ftconfig_8h.html#a4db62b7638f149986cdc24d0c03e062f">FT_UNUSED</a>( orig_y );
<a name="l01135"></a>01135 
<a name="l01136"></a>01136           <span class="comment">/* the `metrics_only&#39; indicates that we only want to compute */</span>
<a name="l01137"></a>01137           <span class="comment">/* the glyph&#39;s metrics (lsb + advance width), not load the   */</span>
<a name="l01138"></a>01138           <span class="comment">/* rest of it; so exit immediately                           */</span>
<a name="l01139"></a>01139           <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ab4c509b363e5a5f4da25460413e9364f">metrics_only</a> )
<a name="l01140"></a>01140             <span class="keywordflow">return</span> PSaux_Err_Ok;
<a name="l01141"></a>01141 
<a name="l01142"></a>01142           <span class="keywordflow">break</span>;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a64c4b96befee91f20e7fa6d74586167e">op_seac</a>:
<a name="l01145"></a>01145           <span class="keywordflow">return</span> t1operator_seac( decoder,
<a name="l01146"></a>01146                                   top[0],
<a name="l01147"></a>01147                                   top[1],
<a name="l01148"></a>01148                                   top[2],
<a name="l01149"></a>01149                                   (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[3] &gt;&gt; 16 ),
<a name="l01150"></a>01150                                   (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[4] &gt;&gt; 16 ) );
<a name="l01151"></a>01151 
<a name="l01152"></a>01152         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa10276ebf35f61596ef9fe3c7277dfc9">op_sbw</a>:
<a name="l01153"></a>01153           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; sbw&quot;</span> ));
<a name="l01154"></a>01154 
<a name="l01155"></a>01155           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76ba03da278b5f6cc13d9ddf9872a45d27c2">T1_Parse_Have_Width</a>;
<a name="l01156"></a>01156 
<a name="l01157"></a>01157           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a> += top[0];
<a name="l01158"></a>01158           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a86247b8fd87873ef93aecf0e27e4b6dc">left_bearing</a>.<a class="code" href="struct_f_t___vector__.html#ac3246ed214e880047ec74eeb15f8b973">y</a> += top[1];
<a name="l01159"></a>01159           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>.<a class="code" href="struct_f_t___vector__.html#a941e818e6dfca06409cddff4f325f74c">x</a>       = top[2];
<a name="l01160"></a>01160           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#a48575715ea96f16bdc7077996013ef9e">advance</a>.<a class="code" href="struct_f_t___vector__.html#ac3246ed214e880047ec74eeb15f8b973">y</a>       = top[3];
<a name="l01161"></a>01161 
<a name="l01162"></a>01162           x = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad3e29097d00fa1941ac17273c1310a92">pos_x</a> + top[0];
<a name="l01163"></a>01163           y = builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ad389bf0d5182b677ed3dba05a9612530">pos_y</a> + top[1];
<a name="l01164"></a>01164 
<a name="l01165"></a>01165           <span class="comment">/* the `metrics_only&#39; indicates that we only want to compute */</span>
<a name="l01166"></a>01166           <span class="comment">/* the glyph&#39;s metrics (lsb + advance width), not load the   */</span>
<a name="l01167"></a>01167           <span class="comment">/* rest of it; so exit immediately                           */</span>
<a name="l01168"></a>01168           <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#ab4c509b363e5a5f4da25460413e9364f">metrics_only</a> )
<a name="l01169"></a>01169             <span class="keywordflow">return</span> PSaux_Err_Ok;
<a name="l01170"></a>01170 
<a name="l01171"></a>01171           <span class="keywordflow">break</span>;
<a name="l01172"></a>01172 
<a name="l01173"></a>01173         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a6f703a74ca71784db63158554283b51b">op_closepath</a>:
<a name="l01174"></a>01174           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; closepath&quot;</span> ));
<a name="l01175"></a>01175 
<a name="l01176"></a>01176           <span class="comment">/* if there is no path, `closepath&#39; is a no-op */</span>
<a name="l01177"></a>01177           <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> == <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76ba858490c5affc67cc3e95424b5bc81e04">T1_Parse_Have_Path</a>   ||
<a name="l01178"></a>01178                builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> == <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76baf45efbcef76ef2289f297cda0417efbd">T1_Parse_Have_Moveto</a> )
<a name="l01179"></a>01179             <a class="code" href="t1decode_8c.html#ae7d9ff6124cf475bbff372ac4142bfbd">close_contour</a>( builder );
<a name="l01180"></a>01180 
<a name="l01181"></a>01181           builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76ba03da278b5f6cc13d9ddf9872a45d27c2">T1_Parse_Have_Width</a>;
<a name="l01182"></a>01182           <span class="keywordflow">break</span>;
<a name="l01183"></a>01183 
<a name="l01184"></a>01184         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a345381d12e43f5b182ee5e2a30fb534b">op_hlineto</a>:
<a name="l01185"></a>01185           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hlineto&quot;</span> ));
<a name="l01186"></a>01186 
<a name="l01187"></a>01187           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) )
<a name="l01188"></a>01188             <span class="keywordflow">goto</span> Fail;
<a name="l01189"></a>01189 
<a name="l01190"></a>01190           x += top[0];
<a name="l01191"></a>01191           <span class="keywordflow">goto</span> Add_Line;
<a name="l01192"></a>01192 
<a name="l01193"></a>01193         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a17b3215232ad4560513c87a128c456db">op_hmoveto</a>:
<a name="l01194"></a>01194           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hmoveto&quot;</span> ));
<a name="l01195"></a>01195 
<a name="l01196"></a>01196           x += top[0];
<a name="l01197"></a>01197           <span class="keywordflow">if</span> ( !decoder-&gt;flex_state )
<a name="l01198"></a>01198           {
<a name="l01199"></a>01199             <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> == <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76badc68b3e6a84b194d0b61e2d1dc74df63">T1_Parse_Start</a> )
<a name="l01200"></a>01200               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01201"></a>01201             builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76baf45efbcef76ef2289f297cda0417efbd">T1_Parse_Have_Moveto</a>;
<a name="l01202"></a>01202           }
<a name="l01203"></a>01203           <span class="keywordflow">break</span>;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027af3031b1cf9b0b560e55cf3c9c5e62819">op_hvcurveto</a>:
<a name="l01206"></a>01206           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hvcurveto&quot;</span> ));
<a name="l01207"></a>01207 
<a name="l01208"></a>01208           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) ||
<a name="l01209"></a>01209                <a class="code" href="t1decode_8c.html#abb2307d7c9ff1cfc3bf71de0f68f3174">check_points</a>( builder, 3 )   )
<a name="l01210"></a>01210             <span class="keywordflow">goto</span> Fail;
<a name="l01211"></a>01211 
<a name="l01212"></a>01212           x += top[0];
<a name="l01213"></a>01213           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01214"></a>01214           x += top[1];
<a name="l01215"></a>01215           y += top[2];
<a name="l01216"></a>01216           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01217"></a>01217           y += top[3];
<a name="l01218"></a>01218           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 1 );
<a name="l01219"></a>01219           <span class="keywordflow">break</span>;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a391b95dc045d3973c0cd0c3ef32d9f4a">op_rlineto</a>:
<a name="l01222"></a>01222           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; rlineto&quot;</span> ));
<a name="l01223"></a>01223 
<a name="l01224"></a>01224           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) )
<a name="l01225"></a>01225             <span class="keywordflow">goto</span> Fail;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227           x += top[0];
<a name="l01228"></a>01228           y += top[1];
<a name="l01229"></a>01229 
<a name="l01230"></a>01230         Add_Line:
<a name="l01231"></a>01231           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a21ec321be74f40a8a3e813aae59b96bc">add_point1</a>( builder, x, y ) )
<a name="l01232"></a>01232             <span class="keywordflow">goto</span> Fail;
<a name="l01233"></a>01233           <span class="keywordflow">break</span>;
<a name="l01234"></a>01234 
<a name="l01235"></a>01235         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8829ed2c50556442df2afa87da1900ed">op_rmoveto</a>:
<a name="l01236"></a>01236           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; rmoveto&quot;</span> ));
<a name="l01237"></a>01237 
<a name="l01238"></a>01238           x += top[0];
<a name="l01239"></a>01239           y += top[1];
<a name="l01240"></a>01240           <span class="keywordflow">if</span> ( !decoder-&gt;flex_state )
<a name="l01241"></a>01241           {
<a name="l01242"></a>01242             <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> == <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76badc68b3e6a84b194d0b61e2d1dc74df63">T1_Parse_Start</a> )
<a name="l01243"></a>01243               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01244"></a>01244             builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76baf45efbcef76ef2289f297cda0417efbd">T1_Parse_Have_Moveto</a>;
<a name="l01245"></a>01245           }
<a name="l01246"></a>01246           <span class="keywordflow">break</span>;
<a name="l01247"></a>01247 
<a name="l01248"></a>01248         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5358bd2ed1ccc8889d9cfae696fb2667">op_rrcurveto</a>:
<a name="l01249"></a>01249           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; rrcurveto&quot;</span> ));
<a name="l01250"></a>01250 
<a name="l01251"></a>01251           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) ||
<a name="l01252"></a>01252                <a class="code" href="t1decode_8c.html#abb2307d7c9ff1cfc3bf71de0f68f3174">check_points</a>( builder, 3 )   )
<a name="l01253"></a>01253             <span class="keywordflow">goto</span> Fail;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255           x += top[0];
<a name="l01256"></a>01256           y += top[1];
<a name="l01257"></a>01257           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01258"></a>01258 
<a name="l01259"></a>01259           x += top[2];
<a name="l01260"></a>01260           y += top[3];
<a name="l01261"></a>01261           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01262"></a>01262 
<a name="l01263"></a>01263           x += top[4];
<a name="l01264"></a>01264           y += top[5];
<a name="l01265"></a>01265           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 1 );
<a name="l01266"></a>01266           <span class="keywordflow">break</span>;
<a name="l01267"></a>01267 
<a name="l01268"></a>01268         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a55f712c565a31264a85d1323c9b3d59c">op_vhcurveto</a>:
<a name="l01269"></a>01269           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; vhcurveto&quot;</span> ));
<a name="l01270"></a>01270 
<a name="l01271"></a>01271           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) ||
<a name="l01272"></a>01272                <a class="code" href="t1decode_8c.html#abb2307d7c9ff1cfc3bf71de0f68f3174">check_points</a>( builder, 3 )   )
<a name="l01273"></a>01273             <span class="keywordflow">goto</span> Fail;
<a name="l01274"></a>01274 
<a name="l01275"></a>01275           y += top[0];
<a name="l01276"></a>01276           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01277"></a>01277           x += top[1];
<a name="l01278"></a>01278           y += top[2];
<a name="l01279"></a>01279           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 0 );
<a name="l01280"></a>01280           x += top[3];
<a name="l01281"></a>01281           <a class="code" href="t1decode_8c.html#a9b1597133571814f610e1d90f27a86b2">add_point</a>( builder, x, y, 1 );
<a name="l01282"></a>01282           <span class="keywordflow">break</span>;
<a name="l01283"></a>01283 
<a name="l01284"></a>01284         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aa1e4559f865967fef5d5bd04c82eebd8">op_vlineto</a>:
<a name="l01285"></a>01285           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; vlineto&quot;</span> ));
<a name="l01286"></a>01286 
<a name="l01287"></a>01287           <span class="keywordflow">if</span> ( <a class="code" href="t1decode_8c.html#a12f7e64a283ca9009c1e8ae06dadca93">start_point</a>( builder, x, y ) )
<a name="l01288"></a>01288             <span class="keywordflow">goto</span> Fail;
<a name="l01289"></a>01289 
<a name="l01290"></a>01290           y += top[0];
<a name="l01291"></a>01291           <span class="keywordflow">goto</span> Add_Line;
<a name="l01292"></a>01292 
<a name="l01293"></a>01293         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2f2c6673d7e040d4a28e415cfe085771">op_vmoveto</a>:
<a name="l01294"></a>01294           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; vmoveto&quot;</span> ));
<a name="l01295"></a>01295 
<a name="l01296"></a>01296           y += top[0];
<a name="l01297"></a>01297           <span class="keywordflow">if</span> ( !decoder-&gt;flex_state )
<a name="l01298"></a>01298           {
<a name="l01299"></a>01299             <span class="keywordflow">if</span> ( builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> == <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76badc68b3e6a84b194d0b61e2d1dc74df63">T1_Parse_Start</a> )
<a name="l01300"></a>01300               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01301"></a>01301             builder-&gt;<a class="code" href="struct_t1___builder_rec__.html#afaa675cc3601ed05ed86bc474153094b">parse_state</a> = <a class="code" href="psaux_8h.html#a7c39b57b37de0f35b9ae6a564fd6c76baf45efbcef76ef2289f297cda0417efbd">T1_Parse_Have_Moveto</a>;
<a name="l01302"></a>01302           }
<a name="l01303"></a>01303           <span class="keywordflow">break</span>;
<a name="l01304"></a>01304 
<a name="l01305"></a>01305         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a7fb3fe984442359dcfdc3bea9f2c9a2c">op_div</a>:
<a name="l01306"></a>01306           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; div&quot;</span> ));
<a name="l01307"></a>01307 
<a name="l01308"></a>01308           <span class="comment">/* if `large_int&#39; is set, we divide unscaled numbers; */</span>
<a name="l01309"></a>01309           <span class="comment">/* otherwise, we divide numbers in 16.16 format --    */</span>
<a name="l01310"></a>01310           <span class="comment">/* in both cases, it is the same operation            */</span>
<a name="l01311"></a>01311           *top = <a class="code" href="freetype_8h.html#a5248df90a0d076e6543b09284face353">FT_DivFix</a>( top[0], top[1] );
<a name="l01312"></a>01312           ++top;
<a name="l01313"></a>01313 
<a name="l01314"></a>01314           large_int = <a class="code" href="ftobjs_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01315"></a>01315           <span class="keywordflow">break</span>;
<a name="l01316"></a>01316 
<a name="l01317"></a>01317         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ab3fb1808476d0c088001e30286b75aa8">op_callsubr</a>:
<a name="l01318"></a>01318           {
<a name="l01319"></a>01319             <a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>  idx;
<a name="l01320"></a>01320 
<a name="l01321"></a>01321 
<a name="l01322"></a>01322             <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; callsubr&quot;</span> ));
<a name="l01323"></a>01323 
<a name="l01324"></a>01324             idx = (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)( top[0] &gt;&gt; 16 );
<a name="l01325"></a>01325             <span class="keywordflow">if</span> ( idx &lt; 0 || idx &gt;= (<a class="code" href="fttypes_8h.html#af90e5fb0d07e21be9fe6faa33f02484c">FT_Int</a>)decoder-&gt;num_subrs )
<a name="l01326"></a>01326             {
<a name="l01327"></a>01327               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01328"></a>01328                          <span class="stringliteral">&quot; invalid subrs index\n&quot;</span> ));
<a name="l01329"></a>01329               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01330"></a>01330             }
<a name="l01331"></a>01331 
<a name="l01332"></a>01332             <span class="keywordflow">if</span> ( zone - decoder-&gt;zones &gt;= <a class="code" href="ftoption_8h.html#aa9c844460223f004a1916df4b7a831f4">T1_MAX_SUBRS_CALLS</a> )
<a name="l01333"></a>01333             {
<a name="l01334"></a>01334               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01335"></a>01335                          <span class="stringliteral">&quot; too many nested subrs\n&quot;</span> ));
<a name="l01336"></a>01336               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01337"></a>01337             }
<a name="l01338"></a>01338 
<a name="l01339"></a>01339             zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a14e9f190496672f6174ead91e375767d">cursor</a> = ip;  <span class="comment">/* save current instruction pointer */</span>
<a name="l01340"></a>01340 
<a name="l01341"></a>01341             zone++;
<a name="l01342"></a>01342 
<a name="l01343"></a>01343             <span class="comment">/* The Type 1 driver stores subroutines without the seed bytes. */</span>
<a name="l01344"></a>01344             <span class="comment">/* The CID driver stores subroutines with seed bytes.  This     */</span>
<a name="l01345"></a>01345             <span class="comment">/* case is taken care of when decoder-&gt;subrs_len == 0.          */</span>
<a name="l01346"></a>01346             zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a> = decoder-&gt;subrs[idx];
<a name="l01347"></a>01347 
<a name="l01348"></a>01348             <span class="keywordflow">if</span> ( decoder-&gt;subrs_len )
<a name="l01349"></a>01349               zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a46fe1e4aa9bdb712ae414305f88d95db">limit</a> = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a> + decoder-&gt;subrs_len[idx];
<a name="l01350"></a>01350             <span class="keywordflow">else</span>
<a name="l01351"></a>01351             {
<a name="l01352"></a>01352               <span class="comment">/* We are using subroutines from a CID font.  We must adjust */</span>
<a name="l01353"></a>01353               <span class="comment">/* for the seed bytes.                                       */</span>
<a name="l01354"></a>01354               zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a>  += ( decoder-&gt;lenIV &gt;= 0 ? decoder-&gt;lenIV : 0 );
<a name="l01355"></a>01355               zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a46fe1e4aa9bdb712ae414305f88d95db">limit</a>  = decoder-&gt;subrs[idx + 1];
<a name="l01356"></a>01356             }
<a name="l01357"></a>01357 
<a name="l01358"></a>01358             zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a14e9f190496672f6174ead91e375767d">cursor</a> = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a>;
<a name="l01359"></a>01359 
<a name="l01360"></a>01360             <span class="keywordflow">if</span> ( !zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a> )
<a name="l01361"></a>01361             {
<a name="l01362"></a>01362               <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01363"></a>01363                          <span class="stringliteral">&quot; invoking empty subrs\n&quot;</span> ));
<a name="l01364"></a>01364               <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01365"></a>01365             }
<a name="l01366"></a>01366 
<a name="l01367"></a>01367             decoder-&gt;zone = zone;
<a name="l01368"></a>01368             ip            = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a9cd7e54387b238504b1e8aae47b7da7c">base</a>;
<a name="l01369"></a>01369             limit         = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a46fe1e4aa9bdb712ae414305f88d95db">limit</a>;
<a name="l01370"></a>01370             <span class="keywordflow">break</span>;
<a name="l01371"></a>01371           }
<a name="l01372"></a>01372 
<a name="l01373"></a>01373         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027aab21e52698f7aad5c5d1a2189b757481">op_pop</a>:
<a name="l01374"></a>01374           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; pop&quot;</span> ));
<a name="l01375"></a>01375 
<a name="l01376"></a>01376           <span class="keywordflow">if</span> ( known_othersubr_result_cnt &gt; 0 )
<a name="l01377"></a>01377           {
<a name="l01378"></a>01378             known_othersubr_result_cnt--;
<a name="l01379"></a>01379             <span class="comment">/* ignore, we pushed the operands ourselves */</span>
<a name="l01380"></a>01380             <span class="keywordflow">break</span>;
<a name="l01381"></a>01381           }
<a name="l01382"></a>01382 
<a name="l01383"></a>01383           <span class="keywordflow">if</span> ( unknown_othersubr_result_cnt == 0 )
<a name="l01384"></a>01384           {
<a name="l01385"></a>01385             <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01386"></a>01386                        <span class="stringliteral">&quot; no more operands for othersubr\n&quot;</span> ));
<a name="l01387"></a>01387             <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01388"></a>01388           }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390           unknown_othersubr_result_cnt--;
<a name="l01391"></a>01391           top++;   <span class="comment">/* `push&#39; the operand to callothersubr onto the stack */</span>
<a name="l01392"></a>01392           <span class="keywordflow">break</span>;
<a name="l01393"></a>01393 
<a name="l01394"></a>01394         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ae2db67096cdbc6de46fa341942e1898d">op_return</a>:
<a name="l01395"></a>01395           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; return&quot;</span> ));
<a name="l01396"></a>01396 
<a name="l01397"></a>01397           <span class="keywordflow">if</span> ( zone &lt;= decoder-&gt;zones )
<a name="l01398"></a>01398           {
<a name="l01399"></a>01399             <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01400"></a>01400                        <span class="stringliteral">&quot; unexpected return\n&quot;</span> ));
<a name="l01401"></a>01401             <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01402"></a>01402           }
<a name="l01403"></a>01403 
<a name="l01404"></a>01404           zone--;
<a name="l01405"></a>01405           ip            = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a14e9f190496672f6174ead91e375767d">cursor</a>;
<a name="l01406"></a>01406           limit         = zone-&gt;<a class="code" href="struct_t1___decoder___zone_rec__.html#a46fe1e4aa9bdb712ae414305f88d95db">limit</a>;
<a name="l01407"></a>01407           decoder-&gt;zone = zone;
<a name="l01408"></a>01408           <span class="keywordflow">break</span>;
<a name="l01409"></a>01409 
<a name="l01410"></a>01410         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a2c900596353103204b06b14023330823">op_dotsection</a>:
<a name="l01411"></a>01411           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; dotsection&quot;</span> ));
<a name="l01412"></a>01412 
<a name="l01413"></a>01413           <span class="keywordflow">break</span>;
<a name="l01414"></a>01414 
<a name="l01415"></a>01415         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a4bf8498f39a6dc52b9d5fb5964f22d8e">op_hstem</a>:
<a name="l01416"></a>01416           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hstem&quot;</span> ));
<a name="l01417"></a>01417 
<a name="l01418"></a>01418           <span class="comment">/* record horizontal hint */</span>
<a name="l01419"></a>01419           <span class="keywordflow">if</span> ( hinter )
<a name="l01420"></a>01420           {
<a name="l01421"></a>01421             <span class="comment">/* top[0] += builder-&gt;left_bearing.y; */</span>
<a name="l01422"></a>01422             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#abdbf955a1fc9b19799ed8ea8137c9381">stem</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, 1, top );
<a name="l01423"></a>01423           }
<a name="l01424"></a>01424           <span class="keywordflow">break</span>;
<a name="l01425"></a>01425 
<a name="l01426"></a>01426         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad76b5420253f810fc77191067c709c15">op_hstem3</a>:
<a name="l01427"></a>01427           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; hstem3&quot;</span> ));
<a name="l01428"></a>01428 
<a name="l01429"></a>01429           <span class="comment">/* record horizontal counter-controlled hints */</span>
<a name="l01430"></a>01430           <span class="keywordflow">if</span> ( hinter )
<a name="l01431"></a>01431             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#acc1edae831d279929f93c8eb1872daa3">stem3</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, 1, top );
<a name="l01432"></a>01432           <span class="keywordflow">break</span>;
<a name="l01433"></a>01433 
<a name="l01434"></a>01434         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a20b81043ca6f12b0f56c4ce916906222">op_vstem</a>:
<a name="l01435"></a>01435           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; vstem&quot;</span> ));
<a name="l01436"></a>01436 
<a name="l01437"></a>01437           <span class="comment">/* record vertical hint */</span>
<a name="l01438"></a>01438           <span class="keywordflow">if</span> ( hinter )
<a name="l01439"></a>01439           {
<a name="l01440"></a>01440             top[0] += orig_x;
<a name="l01441"></a>01441             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#abdbf955a1fc9b19799ed8ea8137c9381">stem</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, 0, top );
<a name="l01442"></a>01442           }
<a name="l01443"></a>01443           <span class="keywordflow">break</span>;
<a name="l01444"></a>01444 
<a name="l01445"></a>01445         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027ad842c0bfcd60407d81e6db9d8230bff3">op_vstem3</a>:
<a name="l01446"></a>01446           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; vstem3&quot;</span> ));
<a name="l01447"></a>01447 
<a name="l01448"></a>01448           <span class="comment">/* record vertical counter-controlled hints */</span>
<a name="l01449"></a>01449           <span class="keywordflow">if</span> ( hinter )
<a name="l01450"></a>01450           {
<a name="l01451"></a>01451             <a class="code" href="ftimage_8h.html#af5f230f4b253d4c7715fd2e595614c90">FT_Pos</a>  dx = orig_x;
<a name="l01452"></a>01452 
<a name="l01453"></a>01453 
<a name="l01454"></a>01454             top[0] += dx;
<a name="l01455"></a>01455             top[2] += dx;
<a name="l01456"></a>01456             top[4] += dx;
<a name="l01457"></a>01457             hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#acc1edae831d279929f93c8eb1872daa3">stem3</a>( hinter-&gt;<a class="code" href="struct_t1___hints___funcs_rec__.html#a6a58f489e362b746703b4caae91349ef">hints</a>, 0, top );
<a name="l01458"></a>01458           }
<a name="l01459"></a>01459           <span class="keywordflow">break</span>;
<a name="l01460"></a>01460 
<a name="l01461"></a>01461         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a8722661efc05bb8edc83cfd04ae20c7a">op_setcurrentpoint</a>:
<a name="l01462"></a>01462           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; setcurrentpoint&quot;</span> ));
<a name="l01463"></a>01463 
<a name="l01464"></a>01464           <span class="comment">/* From the T1 specification, section 6.4:                */</span>
<a name="l01465"></a>01465           <span class="comment">/*                                                        */</span>
<a name="l01466"></a>01466           <span class="comment">/*   The setcurrentpoint command is used only in          */</span>
<a name="l01467"></a>01467           <span class="comment">/*   conjunction with results from OtherSubrs procedures. */</span>
<a name="l01468"></a>01468 
<a name="l01469"></a>01469           <span class="comment">/* known_othersubr_result_cnt != 0 is already handled     */</span>
<a name="l01470"></a>01470           <span class="comment">/* above.                                                 */</span>
<a name="l01471"></a>01471 
<a name="l01472"></a>01472           <span class="comment">/* Note, however, that both Ghostscript and Adobe         */</span>
<a name="l01473"></a>01473           <span class="comment">/* Distiller handle this situation by silently ignoring   */</span>
<a name="l01474"></a>01474           <span class="comment">/* the inappropriate `setcurrentpoint&#39; instruction.  So   */</span>
<a name="l01475"></a>01475           <span class="comment">/* we do the same.                                        */</span>
<a name="l01476"></a>01476 <span class="preprocessor">#if 0</span>
<a name="l01477"></a>01477 <span class="preprocessor"></span>
<a name="l01478"></a>01478           <span class="keywordflow">if</span> ( decoder-&gt;flex_state != 1 )
<a name="l01479"></a>01479           {
<a name="l01480"></a>01480             <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01481"></a>01481                        <span class="stringliteral">&quot; unexpected `setcurrentpoint&#39;\n&quot;</span> ));
<a name="l01482"></a>01482             <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01483"></a>01483           }
<a name="l01484"></a>01484           <span class="keywordflow">else</span>
<a name="l01485"></a>01485             ...
<a name="l01486"></a>01486 #endif
<a name="l01487"></a>01487 
<a name="l01488"></a>01488           x = top[0];
<a name="l01489"></a>01489           y = top[1];
<a name="l01490"></a>01490           decoder-&gt;flex_state = 0;
<a name="l01491"></a>01491           <span class="keywordflow">break</span>;
<a name="l01492"></a>01492 
<a name="l01493"></a>01493         <span class="keywordflow">case</span> <a class="code" href="t1decode_8c.html#ae8a91a23fb127fb677cc33593c5fe027a5c5c0a0ee577d2475e300221a46f1c8f">op_unknown15</a>:
<a name="l01494"></a>01494           <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot; opcode_15&quot;</span> ));
<a name="l01495"></a>01495           <span class="comment">/* nothing to do except to pop the two arguments */</span>
<a name="l01496"></a>01496           <span class="keywordflow">break</span>;
<a name="l01497"></a>01497 
<a name="l01498"></a>01498         <span class="keywordflow">default</span>:
<a name="l01499"></a>01499           <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_parse_charstrings:&quot;</span>
<a name="l01500"></a>01500                      <span class="stringliteral">&quot; unhandled opcode %d\n&quot;</span>, op ));
<a name="l01501"></a>01501           <span class="keywordflow">goto</span> Syntax_Error;
<a name="l01502"></a>01502         }
<a name="l01503"></a>01503 
<a name="l01504"></a>01504         <span class="comment">/* XXX Operators usually clear the operand stack;  */</span>
<a name="l01505"></a>01505         <span class="comment">/*     only div, callsubr, callothersubr, pop, and */</span>
<a name="l01506"></a>01506         <span class="comment">/*     return are different.                       */</span>
<a name="l01507"></a>01507         <span class="comment">/*     In practice it doesn&#39;t matter (?).          */</span>
<a name="l01508"></a>01508 
<a name="l01509"></a>01509         decoder-&gt;top = top;
<a name="l01510"></a>01510 
<a name="l01511"></a>01511 <span class="preprocessor">#ifdef FT_DEBUG_LEVEL_TRACE</span>
<a name="l01512"></a>01512 <span class="preprocessor"></span>        <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;\n&quot;</span> ));
<a name="l01513"></a>01513         bol = <a class="code" href="ftobjs_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01514"></a>01514 <span class="preprocessor">#endif</span>
<a name="l01515"></a>01515 <span class="preprocessor"></span>
<a name="l01516"></a>01516       } <span class="comment">/* general operator processing */</span>
<a name="l01517"></a>01517 
<a name="l01518"></a>01518     } <span class="comment">/* while ip &lt; limit */</span>
<a name="l01519"></a>01519 
<a name="l01520"></a>01520     <a class="code" href="ftdebug_8h.html#ad7e98818b876c5493b441d7516bf34a0">FT_TRACE4</a>(( <span class="stringliteral">&quot;..end..\n\n&quot;</span> ));
<a name="l01521"></a>01521 
<a name="l01522"></a>01522   Fail:
<a name="l01523"></a>01523     <span class="keywordflow">return</span> error;
<a name="l01524"></a>01524 
<a name="l01525"></a>01525   Syntax_Error:
<a name="l01526"></a>01526     <span class="keywordflow">return</span> PSaux_Err_Syntax_Error;
<a name="l01527"></a>01527 
<a name="l01528"></a>01528   Stack_Underflow:
<a name="l01529"></a>01529     <span class="keywordflow">return</span> PSaux_Err_Stack_Underflow;
<a name="l01530"></a>01530   }
<a name="l01531"></a>01531 
<a name="l01532"></a>01532 
<a name="l01533"></a>01533   <span class="comment">/* parse a single Type 1 glyph */</span>
<a name="l01534"></a>01534   <a class="code" href="ftconfig_8h.html#a065cda933183dff5dc368794eefa7c93">FT_LOCAL_DEF</a>( <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a> )
<a name="l01535"></a><a class="code" href="t1decode_8h.html#af420e2b461d92b2e91d2a7d4b4254e40">01535</a>   <a class="code" href="t1decode_8c.html#a7bf6eef23a330d09b5db91623580be79">t1_decoder_parse_glyph</a>( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>  decoder,
<a name="l01536"></a>01536                           <a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>     glyph )
<a name="l01537"></a>01537   {
<a name="l01538"></a>01538     <span class="keywordflow">return</span> decoder-&gt;parse_callback( decoder, glyph );
<a name="l01539"></a>01539   }
<a name="l01540"></a>01540 
<a name="l01541"></a>01541 
<a name="l01542"></a>01542   <span class="comment">/* initialize T1 decoder */</span>
<a name="l01543"></a>01543   <a class="code" href="ftconfig_8h.html#a065cda933183dff5dc368794eefa7c93">FT_LOCAL_DEF</a>( <a class="code" href="fttypes_8h.html#a64c8060bdb3d6eec844a1bf670e06bdd">FT_Error</a> )
<a name="l01544"></a><a class="code" href="t1decode_8h.html#aef7e2c407b38650757740396f7d25790">01544</a>   <a class="code" href="t1decode_8c.html#acc4040ed39b32a73ed5b2cb32df89ee9">t1_decoder_init</a>( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>           decoder,
<a name="l01545"></a>01545                    <a class="code" href="struct_f_t___face_rec__.html">FT_Face</a>              face,
<a name="l01546"></a>01546                    <a class="code" href="struct_f_t___size_rec__.html">FT_Size</a>              <a class="code" href="jsonmain_8cpp.html#ae5efd41ba4949e198484a6a7f1fd543b">size</a>,
<a name="l01547"></a>01547                    <a class="code" href="struct_f_t___glyph_slot_rec__.html">FT_GlyphSlot</a>         slot,
<a name="l01548"></a>01548                    <a class="code" href="fttypes_8h.html#a51f26183ca0c9f4af958939648caeccd">FT_Byte</a>**            glyph_names,
<a name="l01549"></a>01549                    <a class="code" href="struct_p_s___blend_rec__.html">PS_Blend</a>             blend,
<a name="l01550"></a>01550                    <a class="code" href="fttypes_8h.html#a1a832a256bb5a7e6e884afaa1a07f3ae">FT_Bool</a>              hinting,
<a name="l01551"></a>01551                    <a class="code" href="freetype_8h.html#aaa0488bc4d2c5f0a6f4311ddee8edfb7">FT_Render_Mode</a>       hint_mode,
<a name="l01552"></a>01552                    <a class="code" href="psaux_8h.html#a1544a8bc91e0e623a78dbda256e0d03e">T1_Decoder_Callback</a>  parse_callback )
<a name="l01553"></a>01553   {
<a name="l01554"></a>01554     <a class="code" href="ftmemory_8h.html#ad04dbb2871d7219281966386fffaf909">FT_MEM_ZERO</a>( decoder, <span class="keyword">sizeof</span> ( *decoder ) );
<a name="l01555"></a>01555 
<a name="l01556"></a>01556     <span class="comment">/* retrieve PSNames interface from list of current modules */</span>
<a name="l01557"></a>01557     {
<a name="l01558"></a>01558       FT_Service_PsCMaps  psnames = 0;
<a name="l01559"></a>01559 
<a name="l01560"></a>01560 
<a name="l01561"></a>01561       <a class="code" href="ftserv_8h.html#aa973049b6fb899357e6f4561af8223f0">FT_FACE_FIND_GLOBAL_SERVICE</a>( face, psnames, POSTSCRIPT_CMAPS );
<a name="l01562"></a>01562       <span class="keywordflow">if</span> ( !psnames )
<a name="l01563"></a>01563       {
<a name="l01564"></a>01564         <a class="code" href="ftdebug_8h.html#a311092b5a8fece0a17cfb5b2d874e25d">FT_ERROR</a>(( <span class="stringliteral">&quot;t1_decoder_init:&quot;</span>
<a name="l01565"></a>01565                    <span class="stringliteral">&quot; the `psnames&#39; module is not available\n&quot;</span> ));
<a name="l01566"></a>01566         <span class="keywordflow">return</span> PSaux_Err_Unimplemented_Feature;
<a name="l01567"></a>01567       }
<a name="l01568"></a>01568 
<a name="l01569"></a>01569       decoder-&gt;psnames = psnames;
<a name="l01570"></a>01570     }
<a name="l01571"></a>01571 
<a name="l01572"></a>01572     <a class="code" href="psobjs_8c.html#a2cfc0562d4af96220c2305f2cba9a13b">t1_builder_init</a>( &amp;decoder-&gt;builder, face, size, slot, hinting );
<a name="l01573"></a>01573 
<a name="l01574"></a>01574     <span class="comment">/* decoder-&gt;buildchar and decoder-&gt;len_buildchar have to be  */</span>
<a name="l01575"></a>01575     <span class="comment">/* initialized by the caller since we cannot know the length */</span>
<a name="l01576"></a>01576     <span class="comment">/* of the BuildCharArray                                     */</span>
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     decoder-&gt;num_glyphs     = (<a class="code" href="fttypes_8h.html#abcb8db4dbf35d2b55a9e8c7b0926dc52">FT_UInt</a>)face-&gt;num_glyphs;
<a name="l01579"></a>01579     decoder-&gt;glyph_names    = glyph_names;
<a name="l01580"></a>01580     decoder-&gt;hint_mode      = hint_mode;
<a name="l01581"></a>01581     decoder-&gt;blend          = blend;
<a name="l01582"></a>01582     decoder-&gt;parse_callback = parse_callback;
<a name="l01583"></a>01583 
<a name="l01584"></a>01584     decoder-&gt;funcs          = <a class="code" href="psauxmod_8c.html#a1c2140b4571aca2c7157b90c470052f4">t1_decoder_funcs</a>;
<a name="l01585"></a>01585 
<a name="l01586"></a>01586     <span class="keywordflow">return</span> PSaux_Err_Ok;
<a name="l01587"></a>01587   }
<a name="l01588"></a>01588 
<a name="l01589"></a>01589 
<a name="l01590"></a>01590   <span class="comment">/* finalize T1 decoder */</span>
<a name="l01591"></a>01591   <a class="code" href="ftconfig_8h.html#a065cda933183dff5dc368794eefa7c93">FT_LOCAL_DEF</a>( <span class="keywordtype">void</span> )
<a name="l01592"></a><a class="code" href="t1decode_8h.html#abf7834b2e10b1be9d5c92f959b9dd6e0">01592</a>   <a class="code" href="t1decode_8c.html#abf7834b2e10b1be9d5c92f959b9dd6e0">t1_decoder_done</a>( <a class="code" href="struct_t1___decoder_rec__.html">T1_Decoder</a>  decoder )
<a name="l01593"></a>01593   {
<a name="l01594"></a>01594     <a class="code" href="psobjs_8c.html#a7f2f12ed5bb55f818d208d5d1a793262">t1_builder_done</a>( &amp;decoder-&gt;builder );
<a name="l01595"></a>01595   }
<a name="l01596"></a>01596 
<a name="l01597"></a>01597 
<a name="l01598"></a>01598 <span class="comment">/* END */</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="t1decode_8c.html">t1decode.c</a>      </li>

    <li class="footer">Generated on Tue Mar 13 2012 11:44:03 for ARK2D by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
